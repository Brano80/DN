<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Notary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container-bg {
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            max-width: 90%;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
 
    <div id="app" class="container-bg w-full max-w-4xl space-y-8">
        <header class="text-center">
            <h1 class="text-4xl font-bold text-gray-800">Digital Notary</h1>
            <p class="text-gray-600 mt-2">Digital Identity & Signature Manager</p>
        </header>
 
        <main class="space-y-6">
 
            <!-- Authentication Section -->
            <section id="auth-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 text-center">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Overte svoju identitu</h2>
                <p class="text-gray-500 mb-6">Pre spustenie procesu musíte overiť svoju totožnosť pomocou EU Digital Identity Wallet.</p>
                <button onclick="startAuthentication()" class="w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-indigo-700 transition-colors">
                    Prihlásiť sa cez EUDI Wallet
                </button>
            </section>
 
            <!-- Main Menu Section after login -->
            <section id="main-menu" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Menu</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <button onclick="showTemplatesSelection()" class="bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">
                        Vytvoriť digitálny dokument
                    </button>
                    <button onclick="showDocumentVerification()" class="bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">
                        Overiť digitálny dokument
                    </button>
                    <button onclick="showMyContracts()" class="bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">
                        Moje zmluvy
                    </button>
                    <button onclick="showMyEDocuments()" class="bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">
                        Moje e-dokumenty
                    </button>
                    <button onclick="showVirtualOffice()" class="bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">
                        Virtuálna kancelária
                    </button>
                </div>
                <div id="user-info" class="mt-4 text-sm text-gray-500 text-center"></div>
            </section>
            
            <!-- My E-Documents Section -->
            <section id="my-edocuments-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na menu</span>
                </div>
                <h2 class="text-2xl font-semibold mb-6 text-gray-700">Moje e-dokumenty</h2>
                
                <!-- Document Categories -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <!-- Identity Documents -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 114 0v2m-4 0a2 2 0 104 0m-4 0v2m0 0h4" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Doklady totožnosti</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('id-card')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Elektronický občiansky preukaz</p>
                                        <p class="text-sm text-gray-500">Platný do: 15.08.2034</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Aktívny</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('driving-license')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Vodičský preukaz</p>
                                        <p class="text-sm text-gray-500">Platný do: 22.03.2032</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Aktívny</span>
                            </div>
                        </div>
                    </div>

                    <!-- Education Documents -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Vzdelanie</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('university-diploma')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Vysokoškolský diplom</p>
                                        <p class="text-sm text-gray-500">Ing. - Informatika, STU 2018</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Overený</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('high-school-diploma')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Maturitné vysvedčenie</p>
                                        <p class="text-sm text-gray-500">Gymnázium, 2014</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Overený</span>
                            </div>
                        </div>
                    </div>

                    <!-- Property & Vehicle Documents -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Majetok</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('vehicle-registration')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Technický preukaz vozidla</p>
                                        <p class="text-sm text-gray-500">Škoda Octavia - BA456CD</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Aktívny</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('property-deed')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">List vlastníctva</p>
                                        <p class="text-sm text-gray-500">Byt 3+1, Bratislava</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Aktívny</span>
                            </div>
                        </div>
                    </div>

                    <!-- Professional Documents -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h8z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Profesijné</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('work-certificate')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Pracovné potvrdenie</p>
                                        <p class="text-sm text-gray-500">IT Solutions s.r.o.</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Aktuálne</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('professional-license')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Profesijná licencia</p>
                                        <p class="text-sm text-gray-500">Obnovenie do: 30.06.2025</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">Obnoviť</span>
                            </div>
                        </div>
                    </div>

                    <!-- Health Documents -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Zdravotníctvo</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('health-insurance')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Preukaz poistenca</p>
                                        <p class="text-sm text-gray-500">VšZP - 123456789</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Aktívny</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('vaccination-certificate')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Očkovací preukaz</p>
                                        <p class="text-sm text-gray-500">EU Digital COVID Certificate</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Platný</span>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Documents -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Finančné</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('tax-certificate')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Daňové priznanie 2023</p>
                                        <p class="text-sm text-gray-500">Podané: 31.03.2024</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Podané</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer" onclick="showEDocument('bank-statement')">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Výpis z účtu</p>
                                        <p class="text-sm text-gray-500">December 2024</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">Nový</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="mt-8 bg-white p-6 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Prehľad dokumentov</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">12</div>
                            <div class="text-sm text-gray-500">Aktívne dokumenty</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-yellow-600">2</div>
                            <div class="text-sm text-gray-500">Vyžadujú obnovenie</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">3</div>
                            <div class="text-sm text-gray-500">Nové tento mesiac</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-gray-600">256 MB</div>
                            <div class="text-sm text-gray-500">Využité úložisko</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- My Contracts Section -->
            <section id="my-contracts-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na menu</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Moje zmluvy</h2>
                <div class="space-y-3">
                    <!-- Nájomná zmluva -->
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h3 class="font-medium text-gray-800 mb-1">Nájomná zmluva</h3>
                                <p class="text-sm text-gray-500 mb-2">Vytvorené: 18.12.2024</p>
                                <div class="text-sm text-gray-600">
                                    <p><strong>Prenajímateľ:</strong> Peter Kováč</p>
                                    <p><strong>Nájomca:</strong> Anna Nováková</p>
                                    <p><strong>Nehnuteľnosť:</strong> Byt 2+1, Kvetná 789, Bratislava</p>
                                    <p><strong>Nájomné:</strong> 800 € mesačne</p>
                                    <p><strong>Doba nájmu:</strong> Na neurčitý čas</p>
                                </div>
                            </div>
                            <div class="flex flex-col items-end space-y-2">
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Podpísané</span>
                                <button onclick="showContractDetails('najomna')" class="text-blue-600 hover:text-blue-800 text-sm">Zobraziť</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pracovná zmluva -->
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h3 class="font-medium text-gray-800 mb-1">Pracovná zmluva</h3>
                                <p class="text-sm text-gray-500 mb-2">Vytvorené: 15.12.2024</p>
                                <div class="text-sm text-gray-600">
                                    <p><strong>Zamestnávateľ:</strong> IT Solutions s.r.o.</p>
                                    <p><strong>Zamestnanec:</strong> Ján Novák</p>
                                    <p><strong>Pozícia:</strong> Softvérový vývojár</p>
                                    <p><strong>Hrubá mzda:</strong> 2500 € mesačne</p>
                                    <p><strong>Typ zmluvy:</strong> Na neurčitý čas</p>
                                </div>
                            </div>
                            <div class="flex flex-col items-end space-y-2">
                                <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Čaká na podpis</span>
                                <button onclick="showContractDetails('pracovna')" class="text-blue-600 hover:text-blue-800 text-sm">Zobraziť</button>
                            </div>
                        </div>
                    </div>

                    <!-- Kúpno-predajná zmluva - vozidlo -->
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h3 class="font-medium text-gray-800 mb-1">Kúpno-predajná zmluva - vozidlo</h3>
                                <p class="text-sm text-gray-500 mb-2">Vytvorené: 12.12.2024</p>
                                <div class="text-sm text-gray-600">
                                    <p><strong>Predávajúci:</strong> Ján Novák</p>
                                    <p><strong>Kupujúci:</strong> Mária Svobodová</p>
                                    <p><strong>Vozidlo:</strong> Volkswagen Golf 2018</p>
                                    <p><strong>VIN:</strong> WVWZZZ1KZJW123456</p>
                                    <p><strong>Kúpna cena:</strong> 15 500 €</p>
                                </div>
                            </div>
                            <div class="flex flex-col items-end space-y-2">
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Podpísané</span>
                                <button onclick="showContractDetails('vozidlo')" class="text-blue-600 hover:text-blue-800 text-sm">Zobraziť</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Templates Selection Section -->
            <section id="templates-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na menu</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Vyberte typ zmluvy</h2>
                
                <!-- Upload Document Option -->
                <div class="mb-6">
                    <button onclick="showUploadDocument()" class="w-full bg-indigo-50 p-4 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors text-left">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-medium text-indigo-800 mb-1">Nahrať vlastný dokument</h3>
                                <p class="text-sm text-indigo-600">Nahrajte vlastný dokument alebo zmluvu na overenie</p>
                            </div>
                        </div>
                    </button>
                </div>
                
                <div class="mb-4">
                    <h3 class="text-lg font-medium text-gray-700 mb-3">Alebo vyberte zo šablón:</h3>
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <button onclick="createContract('kupna')" class="bg-white p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left">
                        <h3 class="font-medium text-gray-800 mb-2">Kúpna zmluva - nehnuteľnosť</h3>
                        <p class="text-sm text-gray-500">Pre kúpu bytov, domov a pozemkov</p>
                    </button>
                    <button onclick="createContract('vozidlo')" class="bg-white p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left">
                        <h3 class="font-medium text-gray-800 mb-2">Kúpno-predajná zmluva - vozidlo</h3>
                        <p class="text-sm text-gray-500">Pre predaj motorových vozidiel</p>
                    </button>
                    <button onclick="createContract('pracovna')" class="bg-white p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left">
                        <h3 class="font-medium text-gray-800 mb-2">Pracovná zmluva</h3>
                        <p class="text-sm text-gray-500">Zmluva o pracovnom pomere</p>
                    </button>
                    <button onclick="createContract('najom')" class="bg-white p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left">
                        <h3 class="font-medium text-gray-800 mb-2">Nájomná zmluva</h3>
                        <p class="text-sm text-gray-500">Pre prenájom nehnuteľností</p>
                    </button>
                    <button onclick="createContract('darovacia')" class="bg-white p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left">
                        <h3 class="font-medium text-gray-800 mb-2">Darovacia zmluva</h3>
                        <p class="text-sm text-gray-500">Pre darovanie majetku</p>
                    </button>
                </div>
            </section>

            <!-- Upload Document Section -->
            <section id="upload-document-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showTemplatesSelection()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na šablóny</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Nahrať dokument</h2>
                
                <div class="bg-white p-6 rounded-lg border border-gray-200">
                    <div id="upload-area" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-indigo-400 transition-colors cursor-pointer" onclick="document.getElementById('file-input').click()">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 mb-2">Nahrajte dokument</h3>
                        <p class="text-gray-500 mb-4">Kliknite sem alebo pretiahnite súbor</p>
                        <p class="text-sm text-gray-400">Podporované formáty: PDF, DOC, DOCX (max. 10MB)</p>
                        <input type="file" id="file-input" class="hidden" accept=".pdf,.doc,.docx" onchange="handleFileUpload(event)">
                    </div>
                    
                    <div id="uploaded-file" class="hidden mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-green-800" id="file-name">Dokument nahraný</p>
                                <p class="text-sm text-green-600" id="file-size">Veľkosť súboru</p>
                            </div>
                            <button onclick="removeFile()" class="text-red-500 hover:text-red-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="mt-6 space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Názov dokumentu</label>
                            <input type="text" id="document-title" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Zadajte názov dokumentu">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Popis (voliteľné)</label>
                            <textarea id="document-description" class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Krátky popis dokumentu"></textarea>
                        </div>
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" id="requires-notarization" class="w-4 h-4 text-indigo-600 border-gray-300 rounded">
                            <label for="requires-notarization" class="text-sm text-gray-700">Dokument vyžaduje notárske overenie</label>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex space-x-4">
                        <button onclick="processUploadedDocument()" class="flex-1 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400" id="process-btn" disabled>
                            Spracovať dokument
                        </button>
                        <button onclick="showTemplatesSelection()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zrušiť
                        </button>
                    </div>
                </div>
            </section>

            <!-- Virtual Office Section -->
            <section id="virtual-office-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na menu</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Virtuálna kancelária</h2>
                
                <div id="create-office-view" class="bg-white p-6 rounded-lg border border-gray-200 text-center">
                    <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-medium text-gray-800 mb-2">Vytvorte virtuálnu kanceláriu</h3>
                    <p class="text-gray-500 mb-6">Vygenerujte link pre stretnutie s druhou stranou</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <button onclick="createVirtualOffice()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Vytvoriť virtuálnu kanceláriu
                        </button>
                        <button onclick="showMyVirtualOffices()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                            Moje virtuálne kancelárie
                        </button>
                    </div>
                </div>

                <div id="my-virtual-offices-view" class="bg-white p-6 rounded-lg border border-gray-200 hidden">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Moje virtuálne kancelárie</h3>
                    <div class="space-y-4">
                        <!-- Completed transaction -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h4 class="font-medium text-gray-800">Prevod vozidla - BMW X5</h4>
                                    <p class="text-sm text-gray-500">Vytvorené: 10.12.2024 | Dokončené: 12.12.2024</p>
                                </div>
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Dokončené</span>
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Strany:</strong> Peter Kováč → Anna Nováková</p>
                                <p><strong>Cena:</strong> 35 000 €</p>
                                <p><strong>Stav:</strong> Prevod dokončený, dokumenty odoslané</p>
                            </div>
                            <button onclick="showCompletedTransactionDetails('bmw-x5')" class="mt-3 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm">
                                Otvoriť
                            </button>
                        </div>
                        
                        <!-- Active transaction -->
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h4 class="font-medium text-gray-800">Kúpno-predajná zmluva - Rodinný dom</h4>
                                    <p class="text-sm text-gray-500">Vytvorené: 20.12.2024 | Aktívne</p>
                                </div>
                                <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">Aktívne</span>
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Strany:</strong> Ján Novák → Mária Svobodová</p>
                                <p><strong>Cena:</strong> 250 000 €</p>
                                <p><strong>Stav:</strong> Čaká na podpis druhej strany</p>
                            </div>
                            <button onclick="showDigitalSigning('maria.svobodova@email.sk')" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                                Pokračovať v procese
                            </button>
                        </div>
                        
                        <!-- Second Active transaction - Vehicle Sale -->
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h4 class="font-medium text-gray-800">Predaj vozidla - Škoda Octavia</h4>
                                    <p class="text-sm text-gray-500">Vytvorené: 22.12.2024 | Aktívne</p>
                                </div>
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Aktívne</span>
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Strany:</strong> Ján Novák → Tomáš Horváth</p>
                                <p><strong>Vozidlo:</strong> Škoda Octavia 2019, 85 000 km</p>
                                <p><strong>Cena:</strong> 18 500 €</p>
                                <p><strong>Stav:</strong> Čaká na podpis kupujúceho</p>
                            </div>
                            <button onclick="showVehicleSaleProcess()" class="mt-3 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm">
                                Pokračovať v procese
                            </button>
                        </div>
                        
                        <!-- Third Active transaction -->
                        <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h4 class="font-medium text-gray-800">Splnomocnenie - Zastupovanie na úrade</h4>
                                    <p class="text-sm text-gray-500">Vytvorené: 21.12.2024 | Aktívne</p>
                                </div>
                                <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm">Aktívne</span>
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Strany:</strong> Ján Novák → Peter Kováč</p>
                                <p><strong>Účel:</strong> Zastupovanie na katastrálnom úrade</p>
                                <p><strong>Stav:</strong> Pripravené na podpis</p>
                            </div>
                            <button onclick="showPowerOfAttorneySigning()" class="mt-3 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors text-sm">
                                Pokračovať v procese
                            </button>
                        </div>
                    </div>
                    <button onclick="showCreateOfficeView()" class="mt-6 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                        Späť na vytvorenie kancelárie
                    </button>
                </div>

                <div id="office-created-view" class="bg-white p-6 rounded-lg border border-gray-200 hidden">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 mb-2">Virtuálna kancelária vytvorená</h3>
                        <p class="text-gray-500 mb-4">Pošlite tento link druhej strane</p>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Link na stretnutie:</label>
                        <div class="flex items-center space-x-2">
                            <input type="text" id="meeting-link" readonly class="flex-1 p-3 bg-white border border-gray-300 rounded-lg text-sm" value="">
                            <button onclick="copyLink()" class="bg-gray-200 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                                Kopírovať
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email adresa druhej strany:</label>
                        <div class="flex items-center space-x-2">
                            <input type="email" id="recipient-email" class="flex-1 p-3 bg-white border border-gray-300 rounded-lg" placeholder="email@example.com">
                            <button onclick="sendEmail()" class="bg-indigo-600 text-white px-4 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                                Poslať
                            </button>
                        </div>
                    </div>
                    
                    <button onclick="resetOfficeCreation()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                        Vytvoriť novú kanceláriu
                    </button>
                </div>
            </section>

            <!-- Contract Creation Section -->
            <section id="contract-creation-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showTemplatesSelection()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na šablóny</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Vytvorenie zmluvy</h2>
                <div id="contract-form" class="space-y-4">
                    <!-- Form will be populated based on contract type -->
                </div>
            </section>

            <!-- Document Verification Section -->
            <section id="document-verification-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-4 cursor-pointer" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na menu</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Overenie digitálneho dokumentu</h2>
                
                <div class="bg-white p-6 rounded-lg border border-gray-200">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 mb-2">Overenie QES podpisu</h3>
                        <p class="text-gray-500 mb-6">Nahrajte dokument alebo naskenujte QR kód na overenie kvalifikovaného elektronického podpisu</p>
                    </div>
                    
                    <!-- QR Code Scanning Option -->
                    <div class="mb-6">
                        <button onclick="showQRScanner()" class="w-full bg-blue-50 p-4 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors text-left">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M12 12h-4.01M12 12v4m6-4h.01M12 8h.01" />
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-medium text-blue-800 mb-1">Skenovať QR kód</h3>
                                    <p class="text-sm text-blue-600">Naskenujte QR kód z dokumentu na okamžité overenie</p>
                                </div>
                            </div>
                        </button>
                    </div>
                    
                    <!-- File Upload Option -->
                    <div class="mb-6">
                        <button onclick="showFileUploadArea()" class="w-full bg-blue-50 p-4 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors text-left">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-medium text-blue-800 mb-1">Nahrať súbor</h3>
                                    <p class="text-sm text-blue-600">Nahrajte dokument na overenie QES podpisu</p>
                                </div>
                            </div>
                        </button>
                    </div>
                    
                    <div id="file-upload-area" class="hidden mb-6">
                        <div class="mb-4">
                            <h3 class="text-lg font-medium text-gray-700 mb-3">Nahrajte súbor na overenie:</h3>
                        </div>
                        
                        <div id="verification-upload-area" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors cursor-pointer mb-6" onclick="document.getElementById('verification-file-input').click()">
                            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-medium text-gray-800 mb-2">Nahrajte dokument na overenie</h3>
                            <p class="text-gray-500 mb-4">Kliknite sem alebo pretiahnite súbor</p>
                            <p class="text-sm text-gray-400">Podporované formáty: PDF, XML, ASICE (max. 50MB)</p>
                            <input type="file" id="verification-file-input" class="hidden" accept=".pdf,.xml,.asice" onchange="handleVerificationFileUpload(event)">
                        </div>
                    </div>
                    
                    <div id="verification-uploaded-file" class="hidden mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-blue-800" id="verification-file-name">Dokument nahraný</p>
                                <p class="text-sm text-blue-600" id="verification-file-size">Veľkosť súboru</p>
                            </div>
                            <button onclick="removeVerificationFile()" class="text-red-500 hover:text-red-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button onclick="verifyDocument()" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400" id="verify-btn" disabled>
                            Overiť dokument
                        </button>
                        <button onclick="showMainMenu()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zrušiť
                        </button>
                    </div>
                </div>
                
                <!-- Verification Results -->
                <div id="verification-results" class="hidden mt-6 bg-white p-6 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Výsledky overenia</h3>
                    <div id="verification-content">
                        <!-- Results will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Digital Signing Section -->
            <section id="digital-signing-section" class="bg-gray-50 p-6 rounded-xl border border-gray-200 hidden">
                <div class="flex items-center space-x-2 mb-6 cursor-pointer" onclick="showVirtualOffice()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-600">Späť na virtuálnu kanceláriu</span>
                </div>
                
                <h2 id="signing-title" class="text-2xl font-semibold mb-6 text-gray-700">Digitálne podpisovanie zmluvy</h2>
                
                <!-- Progress Timeline -->
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-medium text-gray-800">Priebeh procesu</h3>
                        <span class="text-sm text-gray-500">Krok <span id="current-step">1</span> z <span id="total-steps">5</span></span>
                    </div>
                    <div id="progress-timeline" class="flex items-center space-x-4">
                        <!-- Timeline will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Contract Status -->
                <div class="bg-white p-6 rounded-lg border border-gray-200 mb-6">
                    <h3 id="contract-status-title" class="text-lg font-medium text-gray-800 mb-4">Stav zmluvy: Kúpno-predajná zmluva</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p id="first-party-name" class="font-medium text-gray-800">Ján Novák (Predávajúci)</p>
                                        <p class="text-sm text-gray-500">Podpísané: 20.12.2024 14:30</p>
                                    </div>
                                </div>
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Podpísané</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div id="second-party-icon" class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <p id="second-party-name" class="font-medium text-gray-800">Mária Svobodová (Kupujúca)</p>
                                        <p id="second-party-status" class="text-sm text-gray-500">Čaká na podpis</p>
                                    </div>
                                </div>
                                <span id="second-party-badge" class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Čaká</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div id="contract-details" class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-medium text-blue-800 mb-2">Detaily zmluvy</h4>
                                <div class="text-sm text-blue-700 space-y-1">
                                    <p><strong>Predmet:</strong> Rodinný dom, Bratislava</p>
                                    <p><strong>Kúpna cena:</strong> 250 000 €</p>
                                    <p><strong>Vytvorené:</strong> 20.12.2024</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="bg-white p-6 rounded-lg border border-gray-200">
                    <div id="signing-actions" class="space-y-4">
                        <div class="text-center">
                            <p id="signing-message" class="text-gray-600 mb-4">Čakáme na podpis druhej strany...</p>
                            <button id="simulate-button" onclick="simulateSecondSignature()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                                Simulovať podpis druhej strany
                            </button>
                        </div>
                    </div>
                    
                    <div id="next-step-actions" class="hidden space-y-4">
                        <div class="text-center">
                            <p class="text-gray-600 mb-4">Zmluva je podpísaná oboma stranami. Pokračujte na ďalší krok.</p>
                            <button onclick="proceedToEscrow()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                                Pokračovať na Escrow
                            </button>
                        </div>
                    </div>
                </div>
            </section>
 
        </main>
    </div>

    <script>
        let currentUser = null;
        let currentContractType = null;
        let currentDocumentType = 'contract'; // 'contract' or 'power-of-attorney'

        function startAuthentication() {
            // Show loading state
            const button = event.target;
            button.textContent = 'Overujem identitu...';
            button.disabled = true;
            button.style.backgroundColor = '#9CA3AF';
            button.style.cursor = 'not-allowed';
            
            // Simulate authentication
            setTimeout(() => {
                currentUser = {
                    name: "Ján Novák",
                    id: "SK123456789",
                    email: "jan.novak@email.sk"
                };
                
                // Hide auth section and show main menu
                document.getElementById('auth-section').style.display = 'none';
                document.getElementById('main-menu').classList.remove('hidden');
                
                // Update user info
                document.getElementById('user-info').innerHTML = `Prihlásený ako: <strong>${currentUser.name}</strong> (${currentUser.id})`;
            }, 1500);
        }

        function showMainMenu() {
            hideAllSections();
            document.getElementById('main-menu').classList.remove('hidden');
        }

        function showMyContracts() {
            hideAllSections();
            document.getElementById('my-contracts-section').classList.remove('hidden');
        }

        function showMyEDocuments() {
            hideAllSections();
            document.getElementById('my-edocuments-section').classList.remove('hidden');
        }

        function showEDocument(documentType) {
            // Create modal overlay for document preview
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            let documentContent = '';
            let documentTitle = '';
            
            switch(documentType) {
                case 'id-card':
                    documentTitle = 'Elektronický občiansky preukaz';
                    documentContent = `
                        <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 rounded-lg mb-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl font-bold">SLOVENSKÁ REPUBLIKA</h3>
                                    <p class="text-blue-100">Občiansky preukaz</p>
                                </div>
                                <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-6">
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">Meno a priezvisko</p>
                                    <p class="font-semibold">Ján Novák</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Rodné číslo</p>
                                    <p class="font-semibold">801201/1234</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Dátum narodenia</p>
                                    <p class="font-semibold">01.12.1980</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Miesto narodenia</p>
                                    <p class="font-semibold">Bratislava</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">Číslo OP</p>
                                    <p class="font-semibold">AB123456</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Platný do</p>
                                    <p class="font-semibold">15.08.2034</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Vydal</p>
                                    <p class="font-semibold">OÚ Bratislava I</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Dátum vydania</p>
                                    <p class="font-semibold">16.08.2024</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-green-50 rounded-lg">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                                <span class="text-green-800 font-medium">Dokument je platný a overený</span>
                            </div>
                        </div>
                    `;
                    break;
                case 'driving-license':
                    documentTitle = 'Vodičský preukaz';
                    documentContent = `
                        <div class="bg-gradient-to-r from-pink-500 to-pink-700 text-white p-6 rounded-lg mb-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl font-bold">SLOVENSKÁ REPUBLIKA</h3>
                                    <p class="text-pink-100">Vodičský preukaz</p>
                                </div>
                                <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-6">
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">Meno a priezvisko</p>
                                    <p class="font-semibold">Ján Novák</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Dátum narodenia</p>
                                    <p class="font-semibold">01.12.1980</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Miesto narodenia</p>
                                    <p class="font-semibold">Bratislava</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Skupiny vozidiel</p>
                                    <p class="font-semibold">A, B, C</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">Číslo VP</p>
                                    <p class="font-semibold">SK123456789</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Platný do</p>
                                    <p class="font-semibold">22.03.2032</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Vydal</p>
                                    <p class="font-semibold">OÚ Bratislava I</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Dátum vydania</p>
                                    <p class="font-semibold">23.03.2022</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-green-50 rounded-lg">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                                <span class="text-green-800 font-medium">Vodičský preukaz je platný</span>
                            </div>
                        </div>
                    `;
                    break;
                case 'university-diploma':
                    documentTitle = 'Vysokoškolský diplom';
                    documentContent = `
                        <div class="bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6 rounded-lg mb-4">
                            <div class="text-center">
                                <h3 class="text-xl font-bold">SLOVENSKÁ TECHNICKÁ UNIVERZITA</h3>
                                <p class="text-purple-100">v Bratislave</p>
                                <p class="text-lg font-semibold mt-2">DIPLOM</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="text-center">
                                <p class="text-lg">Týmto sa potvrdzuje, že</p>
                                <p class="text-2xl font-bold text-purple-800 my-2">Ján Novák</p>
                                <p class="text-lg">úspešne absolvoval štúdium</p>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">Študijný program</p>
                                        <p class="font-semibold">Informatika</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Stupeň štúdia</p>
                                        <p class="font-semibold">Magisterské</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Titul</p>
                                        <p class="font-semibold">Ing.</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Rok ukončenia</p>
                                        <p class="font-semibold">2018</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Celkové hodnotenie</p>
                                        <p class="font-semibold">Výborne</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Číslo diplomu</p>
                                        <p class="font-semibold">STU-2018-12345</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-green-50 rounded-lg">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                                <span class="text-green-800 font-medium">Diplom je overený a platný</span>
                            </div>
                        </div>
                    `;
                    break;
                case 'vehicle-registration':
                    documentTitle = 'Technický preukaz vozidla';
                    documentContent = `
                        <div class="bg-gradient-to-r from-orange-500 to-orange-700 text-white p-6 rounded-lg mb-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl font-bold">SLOVENSKÁ REPUBLIKA</h3>
                                    <p class="text-orange-100">Technický preukaz</p>
                                </div>
                                <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-6">
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">Značka a typ</p>
                                    <p class="font-semibold">Škoda Octavia Combi</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">EČV</p>
                                    <p class="font-semibold">BA456CD</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">VIN</p>
                                    <p class="font-semibold">TMBJF7NE5K0123456</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Rok výroby</p>
                                    <p class="font-semibold">2019</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">Vlastník</p>
                                    <p class="font-semibold">Ján Novák</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Objem motora</p>
                                    <p class="font-semibold">1598 cm³</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Výkon</p>
                                    <p class="font-semibold">85 kW</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Palivo</p>
                                    <p class="font-semibold">Benzín</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-green-50 rounded-lg">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                                <span class="text-green-800 font-medium">Technický preukaz je platný</span>
                            </div>
                        </div>
                    `;
                    break;
                default:
                    documentTitle = 'Elektronický dokument';
                    documentContent = `
                        <div class="text-center py-8">
                            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-medium text-gray-800 mb-2">Dokument je dostupný</h3>
                            <p class="text-gray-500">Detaily dokumentu budú zobrazené v plnej verzii aplikácie.</p>
                        </div>
                    `;
            }
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-800">${documentTitle}</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        ${documentContent}
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zavrieť
                        </button>
                        <button onclick="shareDocument('${documentType}')" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Zdieľať
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function shareDocument(documentType) {
            // Close the current modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show share dialog
            const shareModal = document.createElement('div');
            shareModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            shareModal.onclick = (e) => {
                if (e.target === shareModal) {
                    document.body.removeChild(shareModal);
                }
            };
            
            shareModal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-gray-800">Zdieľať dokument</h3>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Typ zdieľania</label>
                                <select id="share-type" class="w-full p-3 border border-gray-300 rounded-lg" onchange="updateShareInfoOptions()">
                                    <option value="view">Iba na prezeranie</option>
                                    <option value="verify">Na overenie</option>
                                    <option value="copy">Kópia dokumentu</option>
                                    <option value="selective">Selektívne zdieľanie</option>
                                </select>
                            </div>
                            <div id="shared-info-section">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Zdieľané informácie</label>
                                <select id="shared-info-select" class="w-full p-3 border border-gray-300 rounded-lg">
                                    <option value="name" selected>Meno a priezvisko</option>
                                    <option value="birthdate">Dátum narodenia</option>
                                    <option value="id-number">Rodné číslo</option>
                                    <option value="address">Adresa bydliska</option>
                                    <option value="document-number">Číslo dokumentu</option>
                                    <option value="validity">Platnosť dokumentu</option>
                                    <option value="photo">Fotografia</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Platnosť linku</label>
                                <select id="share-validity" class="w-full p-3 border border-gray-300 rounded-lg">
                                    <option value="1">1 deň</option>
                                    <option value="7">7 dní</option>
                                    <option value="30">30 dní</option>
                                    <option value="0">Bez obmedzenia</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zrušiť
                        </button>
                        <button onclick="generateQRCode()" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                            Generate QR code
                        </button>
                        <button onclick="sendDocumentShare()" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Zdieľať
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(shareModal);
        }

        function generateQRCode() {
            // Close the current modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Create QR code modal
            const qrModal = document.createElement('div');
            qrModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            qrModal.onclick = (e) => {
                if (e.target === qrModal) {
                    document.body.removeChild(qrModal);
                }
            };
            
            // Generate secure document link
            const documentId = 'doc-' + Math.random().toString(36).substr(2, 12);
            const secureLink = `https://digitalnotary.sk/verify/${documentId}`;
            
            qrModal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-gray-800">QR kód pre dokument</h3>
                    </div>
                    <div class="p-6 text-center">
                        <div class="mb-4">
                            <div id="qr-code-container" class="flex justify-center mb-4"></div>
                            <p class="text-sm text-gray-600 mb-4">Naskenujte QR kód pre rýchly prístup k dokumentu</p>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-500 mb-2">Bezpečný link:</p>
                            <p class="text-sm font-mono bg-white p-2 rounded border break-all">${secureLink}</p>
                        </div>
                        
                        <div class="text-xs text-gray-500 space-y-1">
                            <p><strong>Platnosť:</strong> 24 hodín</p>
                            <p><strong>Typ prístupu:</strong> Iba na prezeranie</p>
                            <p><strong>Šifrovanie:</strong> AES-256</p>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zavrieť
                        </button>
                        <button onclick="copyQRLink('${secureLink}')" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Kopírovať link
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(qrModal);
            
            // Generate QR code using the QR library
            setTimeout(() => {
                const qrContainer = document.getElementById('qr-code-container');
                if (qrContainer && typeof QRCode !== 'undefined') {
                    QRCode.toCanvas(secureLink, { width: 200, height: 200 }, function (error, canvas) {
                        if (error) {
                            qrContainer.innerHTML = '<div class="w-48 h-48 bg-gray-200 rounded-lg flex items-center justify-center"><p class="text-gray-500">QR kód sa nepodarilo vygenerovať</p></div>';
                        } else {
                            canvas.className = 'mx-auto border border-gray-200 rounded-lg';
                            qrContainer.appendChild(canvas);
                        }
                    });
                } else {
                    // Fallback if QR library is not available
                    qrContainer.innerHTML = `
                        <div class="w-48 h-48 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center mx-auto">
                            <div class="text-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M12 12h-4.01M12 12v4m6-4h.01M12 8h.01" />
                                </svg>
                                <p class="text-sm text-gray-500">QR kód</p>
                            </div>
                        </div>
                    `;
                }
            }, 100);
        }

        function copyQRLink(link) {
            navigator.clipboard.writeText(link).then(() => {
                // Show feedback
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'Skopírované!';
                button.classList.add('bg-green-600');
                button.classList.remove('bg-indigo-600');
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('bg-green-600');
                    button.classList.add('bg-indigo-600');
                }, 2000);
            }).catch(() => {
                alert('Link sa nepodarilo skopírovať. Skopírujte ho manuálne.');
            });
        }

        function updateShareInfoOptions() {
            const shareType = document.getElementById('share-type').value;
            const sharedInfoSection = document.getElementById('shared-info-section');
            
            if (shareType === 'selective') {
                sharedInfoSection.style.display = 'block';
            } else {
                sharedInfoSection.style.display = 'none';
            }
        }

        function selectAllShareInfo() {
            const select = document.getElementById('shared-info-select');
            for (let i = 0; i < select.options.length; i++) {
                select.options[i].selected = true;
            }
        }

        function deselectAllShareInfo() {
            const select = document.getElementById('shared-info-select');
            for (let i = 0; i < select.options.length; i++) {
                select.options[i].selected = false;
            }
        }

        function getSelectedShareInfo() {
            const selectedInfo = [];
            const select = document.getElementById('shared-info-select');
            const labels = {
                'name': 'Meno a priezvisko',
                'birthdate': 'Dátum narodenia',
                'id-number': 'Rodné číslo',
                'address': 'Adresa bydliska',
                'document-number': 'Číslo dokumentu',
                'validity': 'Platnosť dokumentu',
                'photo': 'Fotografia'
            };
            
            for (let i = 0; i < select.options.length; i++) {
                if (select.options[i].selected) {
                    selectedInfo.push(labels[select.options[i].value]);
                }
            }
            
            return selectedInfo;
        }

        function sendDocumentShare() {
            const shareType = document.getElementById('share-type').value;
            const validity = document.getElementById('share-validity').value;
            
            let message = `Dokument bol úspešne zdieľaný.`;
            
            if (shareType === 'selective') {
                const selectedInfo = getSelectedShareInfo();
                if (selectedInfo.length === 0) {
                    alert('Prosím vyberte aspoň jednu informáciu na zdieľanie.');
                    return;
                }
                message += `\n\nZdieľané informácie: ${selectedInfo.join(', ')}`;
            }
            
            message += '\n\nBezpečný link bol vygenerovaný pre prístup k vybraným informáciám.';
            
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show success message
            alert(message);
        }

        function showTemplatesSelection() {
            hideAllSections();
            document.getElementById('templates-section').classList.remove('hidden');
        }

        function showVirtualOffice() {
            hideAllSections();
            document.getElementById('virtual-office-section').classList.remove('hidden');
        }

        function showVehicleSaleProcess() {
            hideAllSections();
            document.getElementById('digital-signing-section').classList.remove('hidden');
            setupVehicleSaleWorkflow();
        }

        function showUploadDocument() {
            hideAllSections();
            document.getElementById('upload-document-section').classList.remove('hidden');
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (10MB limit)
            if (file.size > 10 * 1024 * 1024) {
                alert('Súbor je príliš veľký. Maximálna veľkosť je 10MB.');
                return;
            }
            
            // Check file type
            const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
            if (!allowedTypes.includes(file.type)) {
                alert('Nepodporovaný formát súboru. Použite PDF, DOC alebo DOCX.');
                return;
            }
            
            // Show uploaded file info
            document.getElementById('file-name').textContent = file.name;
            document.getElementById('file-size').textContent = `${(file.size / 1024 / 1024).toFixed(2)} MB`;
            document.getElementById('uploaded-file').classList.remove('hidden');
            document.getElementById('upload-area').classList.add('border-green-300', 'bg-green-50');
            document.getElementById('process-btn').disabled = false;
            
            // Auto-fill document title from filename
            const titleInput = document.getElementById('document-title');
            if (!titleInput.value) {
                titleInput.value = file.name.replace(/\.[^/.]+$/, "");
            }
        }

        function removeFile() {
            document.getElementById('file-input').value = '';
            document.getElementById('uploaded-file').classList.add('hidden');
            document.getElementById('upload-area').classList.remove('border-green-300', 'bg-green-50');
            document.getElementById('process-btn').disabled = true;
            document.getElementById('document-title').value = '';
            document.getElementById('document-description').value = '';
            document.getElementById('requires-notarization').checked = false;
        }

        function processUploadedDocument() {
            const title = document.getElementById('document-title').value;
            const description = document.getElementById('document-description').value;
            const requiresNotarization = document.getElementById('requires-notarization').checked;
            
            if (!title.trim()) {
                alert('Prosím zadajte názov dokumentu.');
                return;
            }
            
            // Simulate document processing
            const processingMessage = requiresNotarization ? 
                'Dokument bol nahraný a pripravený na notárske overenie.' : 
                'Dokument bol úspešne nahraný a spracovaný.';
            
            alert(processingMessage + ' V reálnej aplikácii by sa teraz pokračovalo na ďalší krok procesu.');
            
            // Reset form and go back to templates
            removeFile();
            showTemplatesSelection();
        }

        function createContract(type) {
            currentContractType = type;
            hideAllSections();
            document.getElementById('contract-creation-section').classList.remove('hidden');
            
            const formContainer = document.getElementById('contract-form');
            let formHTML = '';
            
            switch(type) {
                case 'kupna':
                    formHTML = `
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Kúpna zmluva - nehnuteľnosť</h3>
                        <div class="space-y-6">
                            <!-- Predávajúci -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Predávajúci</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Ján Novák">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="801201/1234">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Hlavná 123, 811 01 Bratislava">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Kupujúci -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Kupujúci</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Mária Svobodová">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="851015/5678">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Nová 456, 821 01 Bratislava">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Nehnuteľnosť -->
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Predmet kúpy - nehnuteľnosť</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Typ nehnuteľnosti</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="">Vyberte typ</option>
                                            <option value="byt">Byt</option>
                                            <option value="rodinny-dom">Rodinný dom</option>
                                            <option value="pozemok">Pozemok</option>
                                            <option value="garaz">Garáž</option>
                                            <option value="chata">Chata/chalupa</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Výmera (m²)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="85">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Adresa nehnuteľnosti</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Kvetná 789, 811 02 Bratislava">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Číslo LV</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="1234">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Parcela č.</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="567/8">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Finančné podmienky -->
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Finančné podmienky</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Kúpna cena (€)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="250000">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Spôsob platby</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="hotovost">Hotovosť</option>
                                            <option value="prevod">Bankovým prevodom</option>
                                            <option value="hypoteka">Hypotekárny úver</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Termín platby</label>
                                        <input type="date" class="w-full p-3 border border-gray-300 rounded-lg">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button onclick="saveContract()" class="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Vygenerovať zmluvu
                        </button>
                    `;
                    break;
                case 'vozidlo':
                    formHTML = `
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Kúpno-predajná zmluva pre vozidlo - Základné údaje</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Predávajúci</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Meno a priezvisko">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kupujúci</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Meno a priezvisko">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Značka vozidla</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="napr. BMW, Škoda, Volkswagen">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Model</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="napr. X5, Octavia, Golf">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Rok výroby</label>
                                <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="2020" min="1900" max="2024">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">VIN číslo</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="17-miestne VIN číslo">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Evidenčné číslo (EČV)</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="napr. BA123AB">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Počet najazdených km</label>
                                <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Objem motora (cm³)</label>
                                <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="1600">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Výkon motora (kW)</label>
                                <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="85">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Typ paliva</label>
                                <select class="w-full p-3 border border-gray-300 rounded-lg">
                                    <option value="">Vyberte typ paliva</option>
                                    <option value="benzin">Benzín</option>
                                    <option value="nafta">Nafta</option>
                                    <option value="hybrid">Hybrid</option>
                                    <option value="elektro">Elektrické</option>
                                    <option value="lpg">LPG</option>
                                    <option value="cng">CNG</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kúpna cena (€)</label>
                                <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="0.00">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Farba vozidla</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="napr. čierna metalíza">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Dodatočné informácie (voliteľné)</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Stav vozidla, výbava, servisná história, atď."></textarea>
                            </div>
                        </div>
                        <button onclick="saveContract()" class="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Uložiť a pokračovať
                        </button>
                    `;
                    break;
                case 'pracovna':
                    formHTML = `
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Pracovná zmluva</h3>
                        <div class="space-y-6">
                            <!-- Zamestnávateľ -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Zamestnávateľ</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Obchodné meno</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="IT Solutions s.r.o.">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">IČO</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="12345678">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Sídlo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Technická 123, 811 01 Bratislava">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Zastúpený</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Peter Kováč, konateľ">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Zamestnanec -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Zamestnanec</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Ján Novák">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="801201/1234">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Hlavná 456, 811 02 Bratislava">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Pracovné podmienky -->
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Pracovné podmienky</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Názov pozície</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Softvérový vývojár">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Miesto výkonu práce</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Bratislava">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Typ zmluvy</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="neurčitý">Na neurčitý čas</option>
                                            <option value="určitý">Na určitý čas</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Nástup do práce</label>
                                        <input type="date" class="w-full p-3 border border-gray-300 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Týždenný pracovný čas</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="40">40 hodín</option>
                                            <option value="37.5">37,5 hodín</option>
                                            <option value="20">20 hodín (polovičný úväzok)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Skúšobná doba (mesiace)</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="0">Bez skúšobnej doby</option>
                                            <option value="3">3 mesiace</option>
                                            <option value="6">6 mesiacov</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Mzdové podmienky -->
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Mzdové podmienky</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Hrubá mzda (€/mesiac)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="2500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Výplata mzdy</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="mesačne">Mesačne</option>
                                            <option value="dvojtýždenne">Dvojtýždenne</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Deň výplaty</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="15. deň v mesiaci">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button onclick="saveContract()" class="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Vygenerovať zmluvu
                        </button>
                    `;
                    break;
                case 'najom':
                    formHTML = `
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Nájomná zmluva</h3>
                        <div class="space-y-6">
                            <!-- Prenajímateľ -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Prenajímateľ</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Peter Kováč">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="751015/1234">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Hlavná 123, 811 01 Bratislava">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Nájomca -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Nájomca</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Anna Nováková">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="825203/5678">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Nová 456, 821 01 Bratislava">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Predmet nájmu -->
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Predmet nájmu</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Typ nehnuteľnosti</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="">Vyberte typ</option>
                                            <option value="byt">Byt</option>
                                            <option value="dom">Rodinný dom</option>
                                            <option value="kancelaria">Kancelárske priestory</option>
                                            <option value="garaz">Garáž</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Výmera (m²)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="65">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Adresa nehnuteľnosti</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Kvetná 789, 811 02 Bratislava">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Účel nájmu</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="byvanie">Na bývanie</option>
                                            <option value="podnikanie">Na podnikanie</option>
                                            <option value="skladovanie">Na skladovanie</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Nájomné podmienky -->
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Nájomné podmienky</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Mesačné nájomné (€)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="800">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Kaucia (€)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="1600">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Začiatok nájmu</label>
                                        <input type="date" class="w-full p-3 border border-gray-300 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Doba nájmu</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="neurčitá">Na neurčitý čas</option>
                                            <option value="1rok">1 rok</option>
                                            <option value="2roky">2 roky</option>
                                            <option value="3roky">3 roky</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Splatnosť nájomného</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="dopredu">Do 15. dňa vopred</option>
                                            <option value="dozadu">Do 15. dňa dozadu</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button onclick="saveContract()" class="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Vygenerovať zmluvu
                        </button>
                    `;
                    break;
                case 'darovacia':
                    formHTML = `
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Darovacia zmluva</h3>
                        <div class="space-y-6">
                            <!-- Darujúci -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Darujúci</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Ján Novák">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="801201/1234">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Hlavná 123, 811 01 Bratislava">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Obdarovaný -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Obdarovaný</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Meno a priezvisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Mária Nováková">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Rodné číslo</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="851015/5678">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trvalé bydlisko</label>
                                        <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Nová 456, 821 01 Bratislava">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Príbuzenský vzťah</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="">Vyberte vzťah</option>
                                            <option value="dcera">Dcéra</option>
                                            <option value="syn">Syn</option>
                                            <option value="manzelka">Manželka</option>
                                            <option value="manzel">Manžel</option>
                                            <option value="rodic">Rodič</option>
                                            <option value="iny">Iný príbuzný</option>
                                            <option value="nepribuzny">Nepríbuzná osoba</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Predmet darovania -->
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Predmet darovania</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Typ majetku</label>
                                        <select class="w-full p-3 border border-gray-300 rounded-lg">
                                            <option value="">Vyberte typ</option>
                                            <option value="nehnutelnost">Nehnuteľnosť</option>
                                            <option value="vozidlo">Vozidlo</option>
                                            <option value="peniaze">Peňažná suma</option>
                                            <option value="cennosti">Cennosti</option>
                                            <option value="ine">Iný majetok</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Odhadovaná hodnota (€)</label>
                                        <input type="number" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="50000">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Podrobný popis predmetu darovania</label>
                                        <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Detailný popis darovaného majetku..."></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Podmienky darovania -->
                            <div class="bg-yellow-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-3">Podmienky darovania</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-2">
                                        <input type="checkbox" id="bezpodmienecne" class="w-4 h-4 text-indigo-600 border-gray-300 rounded">
                                        <label for="bezpodmienecne" class="text-sm text-gray-700">Bezpodmienečné darovanie</label>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <input type="checkbox" id="podmienecne" class="w-4 h-4 text-indigo-600 border-gray-300 rounded">
                                        <label for="podmienecne" class="text-sm text-gray-700">Podmienečné darovanie</label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Podmienky (ak sa uplatňujú)</label>
                                        <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="2" placeholder="Špecifikujte podmienky darovania..."></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button onclick="saveContract()" class="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Vygenerovať zmluvu
                        </button>
                    `;
                    break;
                default:
                    formHTML = `
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Základné údaje zmluvy</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Názov zmluvy</label>
                                <input type="text" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Zadajte názov">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Popis</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="4" placeholder="Podrobný popis zmluvy"></textarea>
                            </div>
                        </div>
                        <button onclick="saveContract()" class="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Vygenerovať zmluvu
                        </button>
                    `;
            }
            
            formContainer.innerHTML = formHTML;
        }

        function saveContract() {
            alert('Zmluva bola uložená! V reálnej aplikácii by sa teraz pokračovalo na ďalší krok procesu.');
        }

        function createVirtualOffice() {
            // Generate unique meeting link
            const meetingId = 'meeting-' + Math.random().toString(36).substr(2, 9);
            const meetingLink = `https://digitalnotary.sk/office/${meetingId}`;
            
            document.getElementById('meeting-link').value = meetingLink;
            document.getElementById('create-office-view').classList.add('hidden');
            document.getElementById('office-created-view').classList.remove('hidden');
        }

        function copyLink() {
            const linkInput = document.getElementById('meeting-link');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(linkInput.value);
            
            // Show feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Skopírované!';
            button.classList.add('bg-green-200', 'text-green-800');
            button.classList.remove('bg-gray-200', 'text-gray-700');
            
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-green-200', 'text-green-800');
                button.classList.add('bg-gray-200', 'text-gray-700');
            }, 2000);
        }

        function sendEmail() {
            const email = document.getElementById('recipient-email').value;
            const meetingLink = document.getElementById('meeting-link').value;
            
            if (!email) {
                alert('Prosím zadajte email adresu.');
                return;
            }
            
            // In real app, this would send actual email
            const subject = 'Pozvánka na stretnutie - Digital Notary';
            const body = `Dobrý deň,\n\npozvávam Vás na stretnutie v digitálnej notárskej kancelárii.\n\nLink na stretnutie: ${meetingLink}\n\nS pozdravom,\n${currentUser.name}`;
            
            // Create mailto link (this will open user's email client)
            const mailtoLink = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.open(mailtoLink);
            
            // Show digital signing interface
            setTimeout(() => {
                showDigitalSigning(email);
            }, 1000);
        }

        function resetOfficeCreation() {
            document.getElementById('office-created-view').classList.add('hidden');
            document.getElementById('create-office-view').classList.remove('hidden');
            document.getElementById('meeting-link').value = '';
            document.getElementById('recipient-email').value = '';
        }

        function showMyVirtualOffices() {
            document.getElementById('create-office-view').classList.add('hidden');
            document.getElementById('office-created-view').classList.add('hidden');
            document.getElementById('my-virtual-offices-view').classList.remove('hidden');
        }

        function showCreateOfficeView() {
            document.getElementById('my-virtual-offices-view').classList.add('hidden');
            document.getElementById('office-created-view').classList.add('hidden');
            document.getElementById('create-office-view').classList.remove('hidden');
        }

        function setupContractSigning() {
            currentDocumentType = 'contract';
            
            // Set up contract timeline (5 steps)
            document.getElementById('total-steps').textContent = '5';
            document.getElementById('progress-timeline').innerHTML = `
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-1" class="w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-medium">1</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-1" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 100%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Podpis zmluvy</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-2" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">2</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-2" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Escrow</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-3" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">3</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-3" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Zaslanie na kataster</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-4" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">4</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-4" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Vybavenie prevodu</p>
                </div>
                <div>
                    <div id="step-5" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">5</div>
                    <p class="text-xs text-gray-600 mt-1">Dokončené</p>
                </div>
            `;
            
            // Set contract details
            document.getElementById('signing-title').textContent = 'Digitálne podpisovanie zmluvy';
            document.getElementById('contract-status-title').textContent = 'Stav zmluvy: Kúpno-predajná zmluva';
            document.getElementById('first-party-name').textContent = 'Ján Novák (Predávajúci)';
            document.getElementById('contract-details').innerHTML = `
                <h4 class="font-medium text-blue-800 mb-2">Detaily zmluvy</h4>
                <div class="text-sm text-blue-700 space-y-1">
                    <p><strong>Predmet:</strong> Rodinný dom, Bratislava</p>
                    <p><strong>Kúpna cena:</strong> 250 000 €</p>
                    <p><strong>Vytvorené:</strong> 20.12.2024</p>
                </div>
            `;
            
            // Reset signing status
            resetSigningStatus();
            document.getElementById('signing-message').textContent = 'Čakáme na podpis druhej strany...';
            document.getElementById('simulate-button').textContent = 'Simulovať podpis druhej strany';
        }

        function setupVehicleSaleWorkflow() {
            currentDocumentType = 'vehicle-sale';
            
            // Set up vehicle sale timeline (7 steps)
            document.getElementById('total-steps').textContent = '7';
            document.getElementById('progress-timeline').innerHTML = `
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-1" class="w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-medium">1</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-1" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 100%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Podpis zmluvy</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-2" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">2</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-2" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Platba</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-3" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">3</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-3" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Podanie na úrad</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-4" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">4</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-4" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Registrácia</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-5" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">5</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-5" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Notárska zápisnica</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-6" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">6</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-6" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Archivácia</p>
                </div>
                <div>
                    <div id="step-7" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">7</div>
                    <p class="text-xs text-gray-600 mt-1">Dokončené</p>
                </div>
            `;
            
            // Set vehicle sale details
            document.getElementById('signing-title').textContent = 'Predaj vozidla - Škoda Octavia';
            document.getElementById('contract-status-title').textContent = 'Stav transakcie: Predaj motorového vozidla';
            document.getElementById('first-party-name').textContent = 'Ján Novák (Predávajúci)';
            document.getElementById('second-party-name').textContent = 'Tomáš Horváth (Kupujúci)';
            document.getElementById('contract-details').innerHTML = `
                <h4 class="font-medium text-blue-800 mb-2">Detaily vozidla</h4>
                <div class="text-sm text-blue-700 space-y-1">
                    <p><strong>Vozidlo:</strong> Škoda Octavia Combi</p>
                    <p><strong>Rok výroby:</strong> 2019</p>
                    <p><strong>VIN:</strong> TMBJF7NE5K0123456</p>
                    <p><strong>EČV:</strong> BA456CD</p>
                    <p><strong>Najazdené km:</strong> 85 000 km</p>
                    <p><strong>Kúpna cena:</strong> 18 500 €</p>
                </div>
                <div class="mt-3">
                    <button onclick="showVehicleContractPreview()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm">
                        Náhľad zmluvy
                    </button>
                </div>
            `;
            
            // Reset signing status
            resetSigningStatus();
            document.getElementById('signing-message').textContent = 'Čakáme na podpis kupujúceho...';
            document.getElementById('simulate-button').textContent = 'Simulovať podpis kupujúceho';
        }

        function setupPowerOfAttorneySigning() {
            currentDocumentType = 'power-of-attorney';
            
            // Set up power of attorney timeline (3 steps)
            document.getElementById('total-steps').textContent = '3';
            document.getElementById('progress-timeline').innerHTML = `
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-1" class="w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-medium">1</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-1" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 100%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Podpis splnomocnenia</p>
                </div>
                <div class="flex-1">
                    <div class="flex items-center">
                        <div id="step-2" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">2</div>
                        <div class="flex-1 h-1 bg-gray-200 mx-2">
                            <div id="progress-2" class="h-1 bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Overenie</p>
                </div>
                <div>
                    <div id="step-3" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center text-sm font-medium">3</div>
                    <p class="text-xs text-gray-600 mt-1">Dokončené</p>
                </div>
            `;
            
            // Set power of attorney details
            document.getElementById('signing-title').textContent = 'Digitálne podpisovanie splnomocnenia';
            document.getElementById('contract-status-title').textContent = 'Stav dokumentu: Splnomocnenie';
            document.getElementById('first-party-name').textContent = 'Ján Novák (Splnomocniteľ)';
            document.getElementById('second-party-name').textContent = 'Peter Kováč (Splnomocnenec)';
            document.getElementById('contract-details').innerHTML = `
                <h4 class="font-medium text-blue-800 mb-2">Detaily splnomocnenia</h4>
                <div class="text-sm text-blue-700 space-y-1">
                    <p><strong>Účel:</strong> Zastupovanie na katastrálnom úrade</p>
                    <p><strong>Rozsah:</strong> Podanie žiadostí a prevzatie dokumentov</p>
                    <p><strong>Vytvorené:</strong> 21.12.2024</p>
                </div>
                <div class="mt-3">
                    <button onclick="showPowerOfAttorneyPreview()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm">
                        Náhľad
                    </button>
                </div>
            `;
            
            // Reset signing status
            resetSigningStatus();
            document.getElementById('signing-message').textContent = 'Čakáme na podpis splnomocnenca...';
            document.getElementById('simulate-button').textContent = 'Simulovať podpis splnomocnenca';
        }

        function resetSigningStatus() {
            // Reset second party status to waiting
            document.getElementById('second-party-icon').className = 'w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center';
            document.getElementById('second-party-icon').innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            `;
            document.getElementById('second-party-status').textContent = 'Čaká na podpis';
            document.getElementById('second-party-badge').className = 'px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm';
            document.getElementById('second-party-badge').textContent = 'Čaká';
            
            // Show signing actions, hide next step
            document.getElementById('signing-actions').classList.remove('hidden');
            document.getElementById('next-step-actions').classList.add('hidden');
            
            // Reset step counter
            document.getElementById('current-step').textContent = '1';
        }

        function showPowerOfAttorneySigning() {
            hideAllSections();
            document.getElementById('digital-signing-section').classList.remove('hidden');
            setupPowerOfAttorneySigning();
        }

        function showDigitalSigning(recipientEmail) {
            hideAllSections();
            document.getElementById('digital-signing-section').classList.remove('hidden');
            setupContractSigning();
            
            // Set recipient name based on email
            const name = recipientEmail.split('@')[0].replace('.', ' ');
            const capitalizedName = name.split(' ').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
            document.getElementById('second-party-name').textContent = `${capitalizedName} (Kupujúca)`;
        }

        function showVehicleContractPreview() {
            // Create modal overlay for vehicle contract preview
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            // Create modal content with vehicle contract preview
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-800">Kúpno-predajná zmluva - Motorové vozidlo</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <div class="bg-white border border-gray-300 p-8 text-sm leading-relaxed">
                            <div class="text-center mb-8">
                                <h2 class="text-xl font-bold mb-2">KÚPNO-PREDAJNÁ ZMLUVA</h2>
                                <p class="text-gray-600">na predaj motorového vozidla</p>
                            </div>
                            
                            <div class="space-y-6">
                                <div class="grid grid-cols-2 gap-6">
                                    <div>
                                        <p class="font-semibold mb-2">PREDÁVAJÚCI:</p>
                                        <p>Ján Novák</p>
                                        <p>Rodné číslo: 801201/1234</p>
                                        <p>Bydlisko: Hlavná 123, 811 01 Bratislava</p>
                                        <p>Email: jan.novak@email.sk</p>
                                    </div>
                                    <div>
                                        <p class="font-semibold mb-2">KUPUJÚCI:</p>
                                        <p>Tomáš Horváth</p>
                                        <p>Rodné číslo: 850615/9876</p>
                                        <p>Bydlisko: Nová 789, 821 01 Bratislava</p>
                                        <p>Email: tomas.horvath@email.sk</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-3">PREDMET ZMLUVY - MOTOROVÉ VOZIDLO:</p>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <p><strong>Značka a typ:</strong> Škoda Octavia Combi</p>
                                                <p><strong>Rok výroby:</strong> 2019</p>
                                                <p><strong>VIN číslo:</strong> TMBJF7NE5K0123456</p>
                                                <p><strong>Evidenčné číslo:</strong> BA456CD</p>
                                            </div>
                                            <div>
                                                <p><strong>Objem motora:</strong> 1598 cm³</p>
                                                <p><strong>Výkon motora:</strong> 85 kW</p>
                                                <p><strong>Palivo:</strong> Benzín</p>
                                                <p><strong>Najazdené km:</strong> 85 000 km</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">KÚPNA CENA A PLATOBNÉ PODMIENKY:</p>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <p class="text-lg font-bold text-blue-800">Kúpna cena: 18 500,00 EUR</p>
                                        <p class="text-sm text-blue-700 mt-2">Platba: Bankovým prevodom do 7 dní od podpisu zmluvy</p>
                                        <p class="text-sm text-blue-700">Číslo účtu predávajúceho: SK12 1234 5678 9012 3456</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">STAV VOZIDLA:</p>
                                    <p>Vozidlo je predávané v stave, v akom sa nachádza v čase podpisu zmluvy. Kupujúci vyhlasuje, že si vozidlo prezrel a je s jeho stavom oboznámený.</p>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">PREVOD VLASTNÍCTVA:</p>
                                    <p>Vlastnícke právo k vozidlu prechádza na kupujúceho dňom úhrady celej kúpnej ceny. Predávajúci sa zaväzuje odovzdať vozidlo spolu s potrebnými dokladmi do 3 dní od úhrady.</p>
                                </div>
                                
                                <div class="mt-8 pt-6 border-t border-gray-200">
                                    <div class="grid grid-cols-2 gap-8">
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 22.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Ján Novák</p>
                                                <p class="text-sm text-gray-600">predávajúci</p>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 22.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Tomáš Horváth</p>
                                                <p class="text-sm text-gray-600">kupujúci</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zavrieť
                        </button>
                        <button onclick="window.print()" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Tlačiť
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function simulateSecondSignature() {
            // Update second party status to signed
            document.getElementById('second-party-icon').className = 'w-8 h-8 bg-green-100 rounded-full flex items-center justify-center';
            document.getElementById('second-party-icon').innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            `;
            document.getElementById('second-party-status').textContent = 'Podpísané: 22.12.2024 15:20';
            document.getElementById('second-party-badge').className = 'px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm';
            document.getElementById('second-party-badge').textContent = 'Podpísané';
            
            // Show next step actions
            document.getElementById('signing-actions').classList.add('hidden');
            document.getElementById('next-step-actions').classList.remove('hidden');
            
            // Set next step based on document type
            if (currentDocumentType === 'vehicle-sale') {
                document.getElementById('next-step-actions').innerHTML = `
                    <div class="text-center">
                        <p class="text-gray-600 mb-4">Zmluva je podpísaná oboma stranami. Pokračujte na platbu.</p>
                        <button onclick="proceedToVehiclePayment()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Pokračovať na platbu
                        </button>
                    </div>
                `;
            } else if (currentDocumentType === 'power-of-attorney') {
                document.getElementById('next-step-actions').innerHTML = `
                    <div class="text-center">
                        <p class="text-gray-600 mb-4">Splnomocnenie je podpísané oboma stranami. Pokračujte na overenie.</p>
                        <button onclick="proceedToNotarization()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Pokračovať na overenie
                        </button>
                    </div>
                `;
            } else {
                document.getElementById('next-step-actions').innerHTML = `
                    <div class="text-center">
                        <p class="text-gray-600 mb-4">Zmluva je podpísaná oboma stranami. Pokračujte na ďalší krok.</p>
                        <button onclick="proceedToEscrow()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            Pokračovať na Escrow
                        </button>
                    </div>
                `;
            }
        }

        function proceedToEscrow() {
            updateProgressStep(2);
            
            // Update action buttons for escrow
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Inicializácia Escrow služby...</p>
                    <button onclick="completeEscrow()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Dokončiť Escrow
                    </button>
                </div>
            `;
        }

        function completeEscrow() {
            updateProgressStep(3);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Zasielanie dokumentov na kataster nehnuteľností...</p>
                    <button onclick="submitToCadaster()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Potvrdiť zaslanie na kataster
                    </button>
                </div>
            `;
        }

        function submitToCadaster() {
            updateProgressStep(4);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Vybavovanie prevodu vlastníctva...</p>
                    <button onclick="completeTransfer()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Dokončiť prevod
                    </button>
                </div>
            `;
        }

        function completeTransfer() {
            updateProgressStep(5);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center bg-green-50 p-6 rounded-lg">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-medium text-green-800 mb-2">Proces dokončený!</h3>
                    <p class="text-green-700 mb-4">Kúpno-predajná zmluva bola úspešne spracovaná a prevod vlastníctva je dokončený.</p>
                    <div class="bg-white p-4 rounded-lg border border-green-200 mb-4">
                        <div class="space-y-3">
                            <div>
                                <p class="text-sm text-gray-600 mb-2"><strong>Hash dokumentu:</strong></p>
                                <p class="text-xs font-mono bg-gray-100 p-2 rounded">SHA256: b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456ab</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 mb-2"><strong>Časová pečiatka:</strong></p>
                                <p class="text-xs font-mono bg-gray-100 p-2 rounded">2024-12-22T16:15:45.789Z (RFC 3161)</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="showSaveOptions()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                        Uložiť
                    </button>
                </div>
            `;
        }

        function proceedToNotarization() {
            updateProgressStep(2);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Overenie splnomocnenia...</p>
                    <button onclick="completeNotarization()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Dokončiť overenie
                    </button>
                </div>
            `;
        }

        function completeNotarization() {
            updateProgressStep(3);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center bg-green-50 p-6 rounded-lg">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-medium text-green-800 mb-2">Splnomocnenie dokončené!</h3>
                    <p class="text-green-700 mb-4">Splnomocnenie bolo úspešne podpísané a overené.</p>
                    <div class="bg-white p-4 rounded-lg border border-green-200 mb-4">
                        <div class="space-y-3">
                            <div>
                                <p class="text-sm text-gray-600 mb-2"><strong>Hash dokumentu:</strong></p>
                                <p class="text-xs font-mono bg-gray-100 p-2 rounded">SHA256: c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456abc3</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 mb-2"><strong>Časová pečiatka:</strong></p>
                                <p class="text-xs font-mono bg-gray-100 p-2 rounded">2024-12-22T16:20:12.456Z (RFC 3161)</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="showSaveOptions()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                        Uložiť
                    </button>
                </div>
            `;
        }

        function proceedToVehiclePayment() {
            updateProgressStep(2);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Inicializácia platby cez Escrow službu...</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <p class="text-sm text-blue-700"><strong>Suma:</strong> 18 500 € + 35 € (poplatok DN)</p>
                        <p class="text-sm text-blue-700"><strong>Celkom:</strong> 18 535 €</p>
                    </div>
                    <button onclick="completeVehiclePayment()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Potvrdiť platbu
                    </button>
                </div>
            `;
        }

        function completeVehiclePayment() {
            updateProgressStep(3);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Automatické podanie na Okresný úrad - odbor dopravy...</p>
                    <button onclick="submitToTransportOffice()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Potvrdiť podanie
                    </button>
                </div>
            `;
        }

        function submitToTransportOffice() {
            updateProgressStep(4);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Spracovanie registrácie zmeny držiteľa vozidla...</p>
                    <button onclick="completeVehicleRegistration()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Dokončiť registráciu
                    </button>
                </div>
            `;
        }

        function completeVehicleRegistration() {
            updateProgressStep(5);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Vytvorenie notárskej zápisnice...</p>
                    <button onclick="createNotarialRecord()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Vytvoriť zápisnicu
                    </button>
                </div>
            `;
        }

        function createNotarialRecord() {
            updateProgressStep(6);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center">
                    <p class="text-gray-600 mb-4">Archivácia dokumentov do EUDI peňaženky a DN archívu...</p>
                    <button onclick="completeVehicleSale()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        Dokončiť archiváciu
                    </button>
                </div>
            `;
        }

        function completeVehicleSale() {
            updateProgressStep(7);
            
            document.getElementById('next-step-actions').innerHTML = `
                <div class="text-center bg-green-50 p-6 rounded-lg">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-medium text-green-800 mb-2">Predaj vozidla dokončený!</h3>
                    <p class="text-green-700 mb-4">Škoda Octavia bola úspešne predaná. Všetky dokumenty sú archivované v EUDI peňaženke.</p>
                    <div class="bg-white p-4 rounded-lg border border-green-200 mb-4">
                        <div class="space-y-3">
                            <div>
                                <p class="text-sm text-gray-600 mb-2"><strong>Hash dokumentu:</strong></p>
                                <p class="text-xs font-mono bg-gray-100 p-2 rounded">SHA256: a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 mb-2"><strong>Časová pečiatka:</strong></p>
                                <p class="text-xs font-mono bg-gray-100 p-2 rounded">2024-12-22T15:45:32.123Z (RFC 3161)</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="showSaveOptions()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                        Uložiť
                    </button>
                </div>
            `;
        }

        function updateProgressStep(step) {
            document.getElementById('current-step').textContent = step;
            
            let totalSteps = 5; // default for contracts
            if (currentDocumentType === 'power-of-attorney') {
                totalSteps = 3;
            } else if (currentDocumentType === 'vehicle-sale') {
                totalSteps = 7;
            }
            
            for (let i = 1; i <= totalSteps; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                const progressElement = document.getElementById(`progress-${i}`);
                
                if (i <= step) {
                    stepElement.className = 'w-8 h-8 rounded-full bg-green-600 text-white flex items-center justify-center text-sm font-medium';
                    stepElement.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    `;
                    if (progressElement) {
                        progressElement.style.width = '100%';
                        progressElement.className = 'h-1 bg-green-600 transition-all duration-500';
                    }
                } else if (i === step + 1) {
                    stepElement.className = 'w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-medium';
                    stepElement.textContent = i;
                }
            }
        }

        function showPowerOfAttorneyPreview() {
            // Create modal overlay for preview
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            // Create modal content with preview
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-800">Náhľad splnomocnenia</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 text-sm">
                            <div class="text-center mb-6">
                                <h2 class="text-lg font-bold mb-2">SPLNOMOCNENIE</h2>
                                <p class="text-gray-600 text-sm">na zastupovanie na katastrálnom úrade</p>
                            </div>
                            
                            <div class="space-y-4 text-xs">
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-white p-3 rounded border">
                                        <p class="font-semibold text-gray-800 mb-1">Splnomocniteľ:</p>
                                        <p>Ján Novák</p>
                                        <p class="text-gray-600">RČ: 801201/1234</p>
                                    </div>
                                    <div class="bg-white p-3 rounded border">
                                        <p class="font-semibold text-gray-800 mb-1">Splnomocnenec:</p>
                                        <p>Peter Kováč</p>
                                        <p class="text-gray-600">RČ: 750315/5678</p>
                                    </div>
                                </div>
                                
                                <div class="bg-white p-3 rounded border">
                                    <p class="font-semibold text-gray-800 mb-2">Predmet splnomocnenia:</p>
                                    <ul class="text-gray-700 space-y-1 text-xs">
                                        <li>• Podanie žiadostí o výpis z katastra</li>
                                        <li>• Prevzatie dokumentov a rozhodnutí</li>
                                        <li>• Podanie opráv a doplnení</li>
                                        <li>• Vykonanie súvisiacich úkonov</li>
                                    </ul>
                                </div>
                                
                                <div class="bg-white p-3 rounded border">
                                    <p class="font-semibold text-gray-800">Platnosť:</p>
                                    <p class="text-gray-700">Do 31.12.2024 alebo do odvolania</p>
                                </div>
                            </div>
                            
                            <div class="mt-6 pt-4 border-t border-gray-300">
                                <div class="grid grid-cols-2 gap-4 text-center text-xs">
                                    <div>
                                        <p class="text-gray-600 mb-2">V Bratislave, 21.12.2024</p>
                                        <div class="border-t border-gray-400 pt-2">
                                            <p class="font-semibold">Ján Novák</p>
                                            <p class="text-gray-500">splnomocniteľ</p>
                                        </div>
                                    </div>
                                    <div>
                                        <p class="text-gray-600 mb-2">Súhlas:</p>
                                        <div class="border-t border-gray-400 pt-2">
                                            <p class="font-semibold">Peter Kováč</p>
                                            <p class="text-gray-500">splnomocnenec</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zavrieť
                        </button>
                        <button onclick="document.body.removeChild(this.closest('.fixed')); showSendPowerOfAttorneyDialog();" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Poslať
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showSendPowerOfAttorneyDialog() {
            // Create modal overlay for email input
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            // Create modal content with email form
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-gray-800">Poslať splnomocnenie</h3>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email adresa príjemcu</label>
                                <input type="email" id="recipient-email-power" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="email@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Predmet (voliteľné)</label>
                                <input type="text" id="email-subject-power" class="w-full p-3 border border-gray-300 rounded-lg" value="Splnomocnenie na zastupovanie">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Správa (voliteľné)</label>
                                <textarea id="email-message-power" class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Dobrý deň, posielam Vám splnomocnenie na zastupovanie..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zrušiť
                        </button>
                        <button onclick="sendPowerOfAttorneyEmail()" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Poslať
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function sendPowerOfAttorneyEmail() {
            const email = document.getElementById('recipient-email-power').value;
            const subject = document.getElementById('email-subject-power').value || 'Splnomocnenie na zastupovanie';
            const message = document.getElementById('email-message-power').value || 'Dobrý deň,\n\nposielam Vám splnomocnenie na zastupovanie na katastrálnom úrade.\n\nS pozdravom';
            
            if (!email) {
                alert('Prosím zadajte email adresu príjemcu.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Prosím zadajte platnú email adresu.');
                return;
            }
            
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            successModal.onclick = (e) => {
                if (e.target === successModal) {
                    document.body.removeChild(successModal);
                }
            };
            
            successModal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Email odoslaný</h3>
                        <p class="text-gray-600 mb-4">Splnomocnenie bolo úspešne odoslané na adresu:<br><strong>${email}</strong></p>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                            OK
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(successModal);
        }

        function showPowerOfAttorneyDocument() {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            // Create modal content
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-800">Splnomocnenie</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <div class="bg-white border border-gray-300 p-8 text-sm leading-relaxed">
                            <div class="text-center mb-8">
                                <h2 class="text-xl font-bold mb-2">SPLNOMOCNENIE</h2>
                                <p class="text-gray-600">na zastupovanie na katastrálnom úrade</p>
                            </div>
                            
                            <div class="space-y-6">
                                <div>
                                    <p><strong>Splnomocniteľ:</strong></p>
                                    <p>Ján Novák</p>
                                    <p>Rodné číslo: 801201/1234</p>
                                    <p>Bydlisko: Hlavná 123, 811 01 Bratislava</p>
                                </div>
                                
                                <div>
                                    <p><strong>Splnomocnenec:</strong></p>
                                    <p>Peter Kováč</p>
                                    <p>Rodné číslo: 750315/5678</p>
                                    <p>Bydlisko: Nová 456, 811 02 Bratislava</p>
                                </div>
                                
                                <div>
                                    <p><strong>Predmet splnomocnenia:</strong></p>
                                    <p>Týmto splnomocňujem vyššie uvedenú osobu, aby ma zastupovala na Okresnom úrade Bratislava I, odbor katastra nehnuteľností, a to konkrétne:</p>
                                    <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                                        <li>podanie žiadostí o výpis z katastra nehnuteľností</li>
                                        <li>prevzatie dokumentov a rozhodnutí</li>
                                        <li>podanie opráv a doplnení k žiadostiam</li>
                                        <li>vykonanie všetkých potrebných úkonov súvisiacich s vyššie uvedeným</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <p><strong>Platnosť splnomocnenia:</strong></p>
                                    <p>Toto splnomocnenie je platné do 31.12.2024 alebo do odvolania.</p>
                                </div>
                                
                                <div class="mt-8 pt-6 border-t border-gray-200">
                                    <div class="grid grid-cols-2 gap-8">
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 21.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Ján Novák</p>
                                                <p class="text-sm text-gray-600">splnomocniteľ</p>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <p class="mb-4">Súhlas so splnomocnením:</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Peter Kováč</p>
                                                <p class="text-sm text-gray-600">splnomocnenec</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zavrieť
                        </button>
                        <button onclick="window.print()" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Tlačiť
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showDocumentVerification() {
            hideAllSections();
            document.getElementById('document-verification-section').classList.remove('hidden');
        }

        function handleVerificationFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (50MB limit)
            if (file.size > 50 * 1024 * 1024) {
                alert('Súbor je príliš veľký. Maximálna veľkosť je 50MB.');
                return;
            }
            
            // Check file type
            const allowedTypes = ['application/pdf', 'text/xml', 'application/xml', 'application/vnd.etsi.asic-e+zip'];
            const fileExtension = file.name.toLowerCase().split('.').pop();
            const allowedExtensions = ['pdf', 'xml', 'asice'];
            
            if (!allowedExtensions.includes(fileExtension)) {
                alert('Nepodporovaný formát súboru. Použite PDF, XML alebo ASICE.');
                return;
            }
            
            // Show uploaded file info
            document.getElementById('verification-file-name').textContent = file.name;
            document.getElementById('verification-file-size').textContent = `${(file.size / 1024 / 1024).toFixed(2)} MB`;
            document.getElementById('verification-uploaded-file').classList.remove('hidden');
            document.getElementById('verification-upload-area').classList.add('border-blue-300', 'bg-blue-50');
            document.getElementById('verify-btn').disabled = false;
            
            // Hide previous results
            document.getElementById('verification-results').classList.add('hidden');
        }

        function removeVerificationFile() {
            document.getElementById('verification-file-input').value = '';
            document.getElementById('verification-uploaded-file').classList.add('hidden');
            document.getElementById('verification-upload-area').classList.remove('border-blue-300', 'bg-blue-50');
            document.getElementById('verify-btn').disabled = true;
            document.getElementById('verification-results').classList.add('hidden');
        }

        function verifyDocument() {
            const fileName = document.getElementById('verification-file-name').textContent;
            const button = document.getElementById('verify-btn');
            
            // Show loading state
            button.textContent = 'Overujem...';
            button.disabled = true;
            
            // Simulate verification process
            setTimeout(() => {
                // Reset button
                button.textContent = 'Overiť dokument';
                button.disabled = false;
                
                // Show results
                showVerificationResults(fileName);
            }, 2000);
        }

        function showFileUploadArea() {
            document.getElementById('file-upload-area').classList.remove('hidden');
        }

        function showQRScanner() {
            // Create QR scanner modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-800">Skenovanie QR kódu</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <div class="text-center">
                            <div id="qr-scanner-area" class="w-64 h-64 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <div class="text-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-400 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M12 12h-4.01M12 12v4m6-4h.01M12 8h.01" />
                                    </svg>
                                    <p class="text-gray-500 text-sm">Nasmerujte kameru na QR kód</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <button onclick="startQRScanning()" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                                    Spustiť kameru
                                </button>
                                
                                <div class="text-sm text-gray-500">
                                    <p class="mb-2">Alternatívne môžete zadať URL manuálne:</p>
                                    <input type="text" id="manual-qr-url" class="w-full p-3 border border-gray-300 rounded-lg text-sm" placeholder="https://digitalnotary.sk/verify/...">
                                    <button onclick="verifyManualURL()" class="mt-2 w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm">
                                        Overiť URL
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function startQRScanning() {
            // Simulate QR scanning process
            const scannerArea = document.getElementById('qr-scanner-area');
            scannerArea.innerHTML = `
                <div class="text-center">
                    <div class="animate-pulse">
                        <div class="w-48 h-48 bg-green-100 rounded-lg flex items-center justify-center">
                            <div class="w-32 h-32 border-4 border-green-500 rounded-lg relative">
                                <div class="absolute inset-0 border-2 border-green-300 rounded-lg animate-ping"></div>
                                <div class="absolute inset-4 bg-green-200 rounded"></div>
                            </div>
                        </div>
                    </div>
                    <p class="text-green-600 text-sm mt-2">Skenovanie...</p>
                </div>
            `;
            
            // Simulate successful scan after 3 seconds
            setTimeout(() => {
                const scannedURL = 'https://digitalnotary.sk/verify/doc-abc123def456';
                processQRResult(scannedURL);
            }, 3000);
        }

        function verifyManualURL() {
            const url = document.getElementById('manual-qr-url').value.trim();
            
            if (!url) {
                alert('Prosím zadajte URL adresu.');
                return;
            }
            
            if (!url.startsWith('https://digitalnotary.sk/verify/')) {
                alert('Neplatná URL adresa. URL musí začínať s "https://digitalnotary.sk/verify/"');
                return;
            }
            
            processQRResult(url);
        }

        function processQRResult(url) {
            // Close the QR scanner modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Extract document ID from URL
            const documentId = url.split('/').pop();
            
            // Show verification results for the scanned document
            showQRVerificationResults(documentId, url);
        }

        function showQRVerificationResults(documentId, url) {
            // Show results section
            document.getElementById('verification-results').classList.remove('hidden');
            
            // Simulate verification results for QR scanned document
            const resultHTML = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-green-800">Dokument overený cez QR kód</h4>
                            <p class="text-green-700">Kvalifikovaný elektronický podpis (QES) je platný</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg border border-green-200 mb-4">
                        <h5 class="font-medium text-gray-800 mb-2">Informácie o dokumente</h5>
                        <div class="text-sm text-gray-600 space-y-1">
                            <p><strong>Dokument ID:</strong> ${documentId}</p>
                            <p><strong>Typ dokumentu:</strong> Kúpno-predajná zmluva</p>
                            <p><strong>Vytvorené:</strong> 20.12.2024 14:30</p>
                            <p><strong>Overené URL:</strong> <span class="font-mono text-xs break-all">${url}</span></p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg border border-green-200">
                                <h5 class="font-medium text-gray-800 mb-2">Informácie o podpise</h5>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <p><strong>Typ podpisu:</strong> Kvalifikovaný elektronický podpis (QES)</p>
                                    <p><strong>Algoritmus:</strong> RSA-SHA256</p>
                                    <p><strong>Čas podpisu:</strong> 20.12.2024 14:30:15 CET</p>
                                    <p><strong>Časová pečiatka:</strong> Platná</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg border border-green-200">
                                <h5 class="font-medium text-gray-800 mb-2">Podpisovateľ</h5>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <p><strong>Meno:</strong> Ján Novák</p>
                                    <p><strong>Email:</strong> jan.novak@email.sk</p>
                                    <p><strong>Organizácia:</strong> Fyzická osoba</p>
                                    <p><strong>Krajina:</strong> Slovenská republika</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-4 bg-green-100 rounded-lg">
                        <div class="flex items-center space-x-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4" />
                            </svg>
                            <span class="text-green-800 font-medium">Dokument bol úspešne overený cez QR kód</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('verification-content').innerHTML = resultHTML;
        }

        function showVerificationResults(fileName) {
            // Simulate different verification results based on filename
            const isValid = Math.random() > 0.3; // 70% chance of valid signature
            const hasQES = Math.random() > 0.2; // 80% chance of QES if valid
            
            let resultHTML = '';
            
            if (isValid && hasQES) {
                // Valid QES signature
                resultHTML = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Dokument je platný</h4>
                                <p class="text-green-700">Kvalifikovaný elektronický podpis (QES) je platný</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <div class="bg-white p-4 rounded-lg border border-green-200">
                                    <h5 class="font-medium text-gray-800 mb-2">Informácie o podpise</h5>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p><strong>Typ podpisu:</strong> Kvalifikovaný elektronický podpis (QES)</p>
                                        <p><strong>Algoritmus:</strong> RSA-SHA256</p>
                                        <p><strong>Čas podpisu:</strong> 20.12.2024 14:30:15 CET</p>
                                        <p><strong>Časová pečiatka:</strong> Platná</p>
                                    </div>
                                </div>
                                
                                <div class="bg-white p-4 rounded-lg border border-green-200">
                                    <h5 class="font-medium text-gray-800 mb-2">Podpisovateľ</h5>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p><strong>Meno:</strong> Ján Novák</p>
                                        <p><strong>Email:</strong> jan.novak@email.sk</p>
                                        <p><strong>Organizácia:</strong> Fyzická osoba</p>
                                        <p><strong>Krajina:</strong> Slovenská republika</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="bg-white p-4 rounded-lg border border-green-200">
                                    <h5 class="font-medium text-gray-800 mb-2">Certifikát</h5>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p><strong>Vydavateľ:</strong> CA Disig a.s.</p>
                                        <p><strong>Sériové číslo:</strong> 1A2B3C4D5E6F</p>
                                        <p><strong>Platný od:</strong> 15.01.2024</p>
                                        <p><strong>Platný do:</strong> 15.01.2027</p>
                                        <p><strong>Stav:</strong> <span class="text-green-600 font-medium">Platný</span></p>
                                    </div>
                                </div>
                                
                                <div class="bg-white p-4 rounded-lg border border-green-200">
                                    <h5 class="font-medium text-gray-800 mb-2">Overenie dokumentu</h5>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p><strong>Integrita:</strong> <span class="text-green-600 font-medium">Neporušená</span></p>
                                        <p><strong>Autenticita:</strong> <span class="text-green-600 font-medium">Overená</span></p>
                                        <p><strong>Nepopierateľnosť:</strong> <span class="text-green-600 font-medium">Zaručená</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (isValid && !hasQES) {
                // Valid but not QES
                resultHTML = `
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-yellow-800">Dokument je podpísaný</h4>
                                <p class="text-yellow-700">Elektronický podpis je platný, ale nie je kvalifikovaný (QES)</p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-yellow-200">
                            <h5 class="font-medium text-gray-800 mb-2">Informácie o podpise</h5>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Typ podpisu:</strong> Pokročilý elektronický podpis</p>
                                <p><strong>Podpisovateľ:</strong> Mária Svobodová</p>
                                <p><strong>Čas podpisu:</strong> 19.12.2024 16:45:22 CET</p>
                                <p><strong>Stav:</strong> <span class="text-yellow-600 font-medium">Platný, ale nie QES</span></p>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-4 bg-yellow-100 rounded-lg">
                            <p class="text-sm text-yellow-800">
                                <strong>Upozornenie:</strong> Tento podpis nie je kvalifikovaný elektronický podpis (QES) 
                                a nemusí mať rovnakú právnu silu ako vlastnoručný podpis.
                            </p>
                        </div>
                    </div>
                `;
            } else {
                // Invalid signature
                resultHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-red-800">Dokument nie je platný</h4>
                                <p class="text-red-700">Elektronický podpis je neplatný alebo poškodený</p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-red-200">
                            <h5 class="font-medium text-gray-800 mb-2">Problémy s podpisom</h5>
                            <div class="text-sm text-gray-600 space-y-2">
                                <div class="flex items-center space-x-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                    <span>Certifikát je expirovaný</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                    <span>Dokument bol po podpise zmenený</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                    <span>Časová pečiatka je neplatná</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-4 bg-red-100 rounded-lg">
                            <p class="text-sm text-red-800">
                                <strong>Varovanie:</strong> Tento dokument nemá platný elektronický podpis. 
                                Nepoužívajte ho pre právne účely.
                            </p>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('verification-content').innerHTML = resultHTML;
            document.getElementById('verification-results').classList.remove('hidden');
        }

        function showSaveOptions() {
            // Create modal overlay for save options
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-gray-800">Možnosti uloženia</h3>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <button onclick="saveToEUDI()" class="w-full bg-blue-50 p-4 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors text-left">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-blue-800">Uložiť do EUDI peňaženky</h4>
                                        <p class="text-sm text-blue-600">Bezpečné uloženie do digitálnej peňaženky</p>
                                    </div>
                                </div>
                            </button>
                            
                            <button onclick="downloadPDF()" class="w-full bg-green-50 p-4 rounded-lg border border-green-200 hover:bg-green-100 transition-colors text-left">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-green-800">Stiahnuť ako PDF</h4>
                                        <p class="text-sm text-green-600">Stiahnuť dokument s QES podpisom</p>
                                    </div>
                                </div>
                            </button>
                            
                            <button onclick="sendByEmail()" class="w-full bg-purple-50 p-4 rounded-lg border border-purple-200 hover:bg-purple-100 transition-colors text-left">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-purple-800">Odoslať emailom</h4>
                                        <p class="text-sm text-purple-600">Poslať dokument na email adresu</p>
                                    </div>
                                </div>
                            </button>
                            

                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zrušiť
                        </button>
                        <button onclick="document.body.removeChild(this.closest('.fixed')); showMainMenu();" class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                            Späť na menu
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function saveToEUDI() {
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            successModal.onclick = (e) => {
                if (e.target === successModal) {
                    document.body.removeChild(successModal);
                    showMainMenu();
                }
            };
            
            successModal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 text-center">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Uložené do EUDI peňaženky</h3>
                        <p class="text-gray-600 mb-4">Dokument bol úspešne uložený do vašej digitálnej peňaženky s QES podpisom a časovou pečiatkou.</p>
                        <button onclick="document.body.removeChild(this.closest('.fixed')); showMainMenu();" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            OK
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(successModal);
        }

        function downloadPDF() {
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Simulate PDF download
            alert('PDF dokument s QES podpisom sa sťahuje...');
            showMainMenu();
        }

        function sendByEmail() {
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show email input dialog
            const emailModal = document.createElement('div');
            emailModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            emailModal.onclick = (e) => {
                if (e.target === emailModal) {
                    document.body.removeChild(emailModal);
                }
            };
            
            emailModal.innerHTML = `
                <div class="bg-white rounded-lg max-w-md w-full">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-gray-800">Odoslať dokument emailom</h3>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email adresa</label>
                                <input type="email" id="email-recipient" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="email@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Predmet</label>
                                <input type="text" id="email-subject" class="w-full p-3 border border-gray-300 rounded-lg" value="Dokument s QES podpisom">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Správa</label>
                                <textarea id="email-message" class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Dobrý deň, posielam Vám dokument s kvalifikovaným elektronickým podpisom..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zrušiť
                        </button>
                        <button onclick="sendDocumentEmail()" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                            Odoslať
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(emailModal);
        }

        function sendDocumentEmail() {
            const email = document.getElementById('email-recipient').value;
            
            if (!email) {
                alert('Prosím zadajte email adresu.');
                return;
            }
            
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            alert(`Dokument bol odoslaný na adresu: ${email}`);
            showMainMenu();
        }

        function generateQRForDocument() {
            // Close the modal
            const modal = document.querySelector('.fixed');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Generate QR code for the completed document
            generateQRCode();
        }

        function showCompletedTransactionDetails(transactionId) {
            // Create modal overlay for completed transaction details
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            let transactionContent = '';
            
            if (transactionId === 'bmw-x5') {
                transactionContent = `
                    <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                            <h3 class="text-xl font-semibold text-gray-800">Prevod vozidla - BMW X5</h3>
                            <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        <div class="p-6">
                            <!-- Transaction Status -->
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200 mb-6">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h4 class="text-lg font-semibold text-green-800">Transakcia dokončená</h4>
                                        <p class="text-green-700">Prevod vozidla bol úspešne dokončený 12.12.2024</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Transaction Details -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div class="bg-white p-4 rounded-lg border border-gray-200">
                                    <h5 class="font-medium text-gray-800 mb-3">Detaily vozidla</h5>
                                    <div class="text-sm text-gray-600 space-y-2">
                                        <p><strong>Značka a model:</strong> BMW X5</p>
                                        <p><strong>Rok výroby:</strong> 2020</p>
                                        <p><strong>VIN:</strong> WBAXG71020P123456</p>
                                        <p><strong>EČV:</strong> BL789XY</p>
                                        <p><strong>Najazdené km:</strong> 45 000 km</p>
                                        <p><strong>Farba:</strong> Čierna metalíza</p>
                                    </div>
                                </div>
                                
                                <div class="bg-white p-4 rounded-lg border border-gray-200">
                                    <h5 class="font-medium text-gray-800 mb-3">Strany transakcie</h5>
                                    <div class="text-sm text-gray-600 space-y-2">
                                        <div>
                                            <p><strong>Predávajúci:</strong></p>
                                            <p>Peter Kováč</p>
                                            <p>RČ: 751015/1234</p>
                                            <p>Email: peter.kovac@email.sk</p>
                                        </div>
                                        <div class="mt-3">
                                            <p><strong>Kupujúca:</strong></p>
                                            <p>Anna Nováková</p>
                                            <p>RČ: 825203/5678</p>
                                            <p>Email: anna.novakova@email.sk</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Financial Details -->
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6">
                                <h5 class="font-medium text-blue-800 mb-3">Finančné detaily</h5>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                    <div>
                                        <p class="text-blue-700"><strong>Kúpna cena:</strong></p>
                                        <p class="text-lg font-bold text-blue-800">35 000 €</p>
                                    </div>
                                    <div>
                                        <p class="text-blue-700"><strong>Poplatok DN:</strong></p>
                                        <p class="text-lg font-bold text-blue-800">65 €</p>
                                    </div>
                                    <div>
                                        <p class="text-blue-700"><strong>Celkom:</strong></p>
                                        <p class="text-lg font-bold text-blue-800">35 065 €</p>
                                    </div>
                                </div>
                                <div class="mt-3 text-sm text-blue-700">
                                    <p><strong>Platba dokončená:</strong> 11.12.2024 09:15</p>
                                    <p><strong>Spôsob platby:</strong> Bankovým prevodom cez Escrow</p>
                                </div>
                            </div>
                            
                            <!-- Timeline -->
                            <div class="bg-white p-4 rounded-lg border border-gray-200 mb-6">
                                <h5 class="font-medium text-gray-800 mb-4">Časová os transakcie</h5>
                                <div class="space-y-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800">Zmluva podpísaná</p>
                                            <p class="text-xs text-gray-500">10.12.2024 14:30</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800">Platba potvrdená</p>
                                            <p class="text-xs text-gray-500">11.12.2024 09:15</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800">Podanie na úrad</p>
                                            <p class="text-xs text-gray-500">11.12.2024 11:45</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800">Registrácia dokončená</p>
                                            <p class="text-xs text-gray-500">12.12.2024 10:20</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800">Dokumenty archivované</p>
                                            <p class="text-xs text-gray-500">12.12.2024 15:30</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Documents -->
                            <div class="bg-white p-4 rounded-lg border border-gray-200">
                                <h5 class="font-medium text-gray-800 mb-4">Dokumenty</h5>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                </svg>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-800">Kúpno-predajná zmluva</p>
                                                <p class="text-sm text-gray-500">S QES podpismi oboch strán</p>
                                            </div>
                                        </div>
                                        <button class="text-blue-600 hover:text-blue-800 text-sm">Stiahnuť</button>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                </svg>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-800">Notárska zápisnica</p>
                                                <p class="text-sm text-gray-500">Oficiálne overenie prevodu</p>
                                            </div>
                                        </div>
                                        <button class="text-blue-600 hover:text-blue-800 text-sm">Stiahnuť</button>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                </svg>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-800">Potvrdenie z úradu</p>
                                                <p class="text-sm text-gray-500">Registrácia zmeny držiteľa</p>
                                            </div>
                                        </div>
                                        <button class="text-blue-600 hover:text-blue-800 text-sm">Stiahnuť</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                            <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                Zavrieť
                            </button>
                            <button onclick="window.print()" class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                                Tlačiť súhrn
                            </button>
                        </div>
                    </div>
                `;
            }
            
            modal.innerHTML = transactionContent;
            document.body.appendChild(modal);
        }

        function showContractDetails(contractType) {
            // Create modal overlay for contract details
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            let contractContent = '';
            let contractTitle = '';
            
            switch(contractType) {
                case 'najomna':
                    contractTitle = 'Nájomná zmluva';
                    contractContent = `
                        <div class="bg-white border border-gray-300 p-8 text-sm leading-relaxed">
                            <div class="text-center mb-8">
                                <h2 class="text-xl font-bold mb-2">NÁJOMNÁ ZMLUVA</h2>
                                <p class="text-gray-600">na prenájom nehnuteľnosti</p>
                            </div>
                            
                            <div class="space-y-6">
                                <div class="grid grid-cols-2 gap-6">
                                    <div>
                                        <p class="font-semibold mb-2">PRENAJÍMATEĽ:</p>
                                        <p>Peter Kováč</p>
                                        <p>Rodné číslo: 751015/1234</p>
                                        <p>Bydlisko: Hlavná 123, 811 01 Bratislava</p>
                                        <p>Email: peter.kovac@email.sk</p>
                                    </div>
                                    <div>
                                        <p class="font-semibold mb-2">NÁJOMCA:</p>
                                        <p>Anna Nováková</p>
                                        <p>Rodné číslo: 825203/5678</p>
                                        <p>Bydlisko: Nová 456, 821 01 Bratislava</p>
                                        <p>Email: anna.novakova@email.sk</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-3">PREDMET NÁJMU:</p>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <p><strong>Typ nehnuteľnosti:</strong> Byt</p>
                                                <p><strong>Dispozícia:</strong> 2+1</p>
                                                <p><strong>Výmera:</strong> 65 m²</p>
                                            </div>
                                            <div>
                                                <p><strong>Adresa:</strong> Kvetná 789, 811 02 Bratislava</p>
                                                <p><strong>Poschodie:</strong> 3. poschodie</p>
                                                <p><strong>Účel nájmu:</strong> Na bývanie</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">NÁJOMNÉ PODMIENKY:</p>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <p class="text-lg font-bold text-blue-800">Mesačné nájomné: 800,00 EUR</p>
                                                <p class="text-sm text-blue-700 mt-1">Kaucia: 1 600,00 EUR</p>
                                            </div>
                                            <div>
                                                <p class="text-sm text-blue-700">Začiatok nájmu: 01.01.2025</p>
                                                <p class="text-sm text-blue-700">Doba nájmu: Na neurčitý čas</p>
                                                <p class="text-sm text-blue-700">Splatnosť: Do 15. dňa vopred</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">PRÁVA A POVINNOSTI:</p>
                                    <p class="text-sm">Nájomca sa zaväzuje používať prenajatú nehnuteľnosť výlučne na dohodnutý účel a udržiavať ju v dobrom stave. Prenajímateľ zabezpečí riadne fungovanie všetkých inštalácií.</p>
                                </div>
                                
                                <div class="mt-8 pt-6 border-t border-gray-200">
                                    <div class="grid grid-cols-2 gap-8">
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 18.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Peter Kováč</p>
                                                <p class="text-sm text-gray-600">prenajímateľ</p>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 18.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Anna Nováková</p>
                                                <p class="text-sm text-gray-600">nájomca</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'pracovna':
                    contractTitle = 'Pracovná zmluva';
                    contractContent = `
                        <div class="bg-white border border-gray-300 p-8 text-sm leading-relaxed">
                            <div class="text-center mb-8">
                                <h2 class="text-xl font-bold mb-2">PRACOVNÁ ZMLUVA</h2>
                                <p class="text-gray-600">o pracovnom pomere</p>
                            </div>
                            
                            <div class="space-y-6">
                                <div class="grid grid-cols-2 gap-6">
                                    <div>
                                        <p class="font-semibold mb-2">ZAMESTNÁVATEĽ:</p>
                                        <p>IT Solutions s.r.o.</p>
                                        <p>IČO: 12345678</p>
                                        <p>Sídlo: Technická 123, 811 01 Bratislava</p>
                                        <p>Zastúpený: Peter Kováč, konateľ</p>
                                    </div>
                                    <div>
                                        <p class="font-semibold mb-2">ZAMESTNANEC:</p>
                                        <p>Ján Novák</p>
                                        <p>Rodné číslo: 801201/1234</p>
                                        <p>Bydlisko: Hlavná 456, 811 02 Bratislava</p>
                                        <p>Email: jan.novak@email.sk</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-3">PRACOVNÉ PODMIENKY:</p>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <p><strong>Pozícia:</strong> Softvérový vývojár</p>
                                                <p><strong>Miesto výkonu:</strong> Bratislava</p>
                                                <p><strong>Typ zmluvy:</strong> Na neurčitý čas</p>
                                            </div>
                                            <div>
                                                <p><strong>Nástup:</strong> 02.01.2025</p>
                                                <p><strong>Pracovný čas:</strong> 40 hodín týždenne</p>
                                                <p><strong>Skúšobná doba:</strong> 3 mesiace</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">MZDOVÉ PODMIENKY:</p>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <p class="text-lg font-bold text-blue-800">Hrubá mzda: 2 500,00 EUR</p>
                                                <p class="text-sm text-blue-700 mt-1">Mesačne</p>
                                            </div>
                                            <div>
                                                <p class="text-sm text-blue-700">Výplata: Mesačne</p>
                                                <p class="text-sm text-blue-700">Deň výplaty: 15. deň v mesiaci</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">PRACOVNÁ NÁPLŇ:</p>
                                    <p class="text-sm">Vývoj softvérových aplikácií, údržba existujúcich systémov, spolupráca s tímom vývojárov, dokumentácia kódu a účasť na projektových stretnutiach.</p>
                                </div>
                                
                                <div class="mt-8 pt-6 border-t border-gray-200">
                                    <div class="grid grid-cols-2 gap-8">
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 15.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Peter Kováč</p>
                                                <p class="text-sm text-gray-600">za zamestnávateľa</p>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa ___________</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Ján Novák</p>
                                                <p class="text-sm text-gray-600">zamestnanec</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'vozidlo':
                    contractTitle = 'Kúpno-predajná zmluva - vozidlo';
                    contractContent = `
                        <div class="bg-white border border-gray-300 p-8 text-sm leading-relaxed">
                            <div class="text-center mb-8">
                                <h2 class="text-xl font-bold mb-2">KÚPNO-PREDAJNÁ ZMLUVA</h2>
                                <p class="text-gray-600">na predaj motorového vozidla</p>
                            </div>
                            
                            <div class="space-y-6">
                                <div class="grid grid-cols-2 gap-6">
                                    <div>
                                        <p class="font-semibold mb-2">PREDÁVAJÚCI:</p>
                                        <p>Ján Novák</p>
                                        <p>Rodné číslo: 801201/1234</p>
                                        <p>Bydlisko: Hlavná 123, 811 01 Bratislava</p>
                                        <p>Email: jan.novak@email.sk</p>
                                    </div>
                                    <div>
                                        <p class="font-semibold mb-2">KUPUJÚCA:</p>
                                        <p>Mária Svobodová</p>
                                        <p>Rodné číslo: 851015/5678</p>
                                        <p>Bydlisko: Nová 456, 821 01 Bratislava</p>
                                        <p>Email: maria.svobodova@email.sk</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-3">PREDMET ZMLUVY - MOTOROVÉ VOZIDLO:</p>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <p><strong>Značka a typ:</strong> Volkswagen Golf</p>
                                                <p><strong>Rok výroby:</strong> 2018</p>
                                                <p><strong>VIN číslo:</strong> WVWZZZ1KZJW123456</p>
                                                <p><strong>Evidenčné číslo:</strong> BA789XY</p>
                                            </div>
                                            <div>
                                                <p><strong>Objem motora:</strong> 1400 cm³</p>
                                                <p><strong>Výkon motora:</strong> 92 kW</p>
                                                <p><strong>Palivo:</strong> Benzín</p>
                                                <p><strong>Najazdené km:</strong> 68 000 km</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">KÚPNA CENA A PLATOBNÉ PODMIENKY:</p>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <p class="text-lg font-bold text-blue-800">Kúpna cena: 15 500,00 EUR</p>
                                        <p class="text-sm text-blue-700 mt-2">Platba: Bankovým prevodom do 7 dní od podpisu zmluvy</p>
                                        <p class="text-sm text-blue-700">Číslo účtu predávajúceho: SK12 1234 5678 9012 3456</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">STAV VOZIDLA:</p>
                                    <p class="text-sm">Vozidlo je predávané v stave, v akom sa nachádza v čase podpisu zmluvy. Kupujúca vyhlasuje, že si vozidlo prezrela a je s jeho stavom oboznámená. Vozidlo má kompletné zimné a letné pneumatiky.</p>
                                </div>
                                
                                <div>
                                    <p class="font-semibold mb-2">PREVOD VLASTNÍCTVA:</p>
                                    <p class="text-sm">Vlastnícke právo k vozidlu prechádza na kupujúcu dňom úhrady celej kúpnej ceny. Predávajúci sa zaväzuje odovzdať vozidlo spolu s potrebnými dokladmi do 3 dní od úhrady.</p>
                                </div>
                                
                                <div class="mt-8 pt-6 border-t border-gray-200">
                                    <div class="grid grid-cols-2 gap-8">
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 12.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Ján Novák</p>
                                                <p class="text-sm text-gray-600">predávajúci</p>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <p class="mb-4">V Bratislave, dňa 12.12.2024</p>
                                            <div class="border-t border-gray-400 pt-2">
                                                <p class="font-semibold">Mária Svobodová</p>
                                                <p class="text-sm text-gray-600">kupujúca</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                default:
                    contractTitle = 'Zmluva';
                    contractContent = '<p class="text-center py-8 text-gray-500">Detaily zmluvy nie sú dostupné.</p>';
            }
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-800">${contractTitle}</h3>
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        ${contractContent}
                    </div>
                    <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                        <button onclick="document.body.removeChild(this.closest('.fixed'))" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Zavrieť
                        </button>
                        <button onclick="window.print()" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Tlačiť
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function hideAllSections() {
            const sections = ['auth-section', 'main-menu', 'my-edocuments-section', 'my-contracts-section', 'templates-section', 'virtual-office-section', 'contract-creation-section', 'upload-document-section', 'document-verification-section', 'digital-signing-section'];
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98ef210c15dea080',t:'MTc2MDUyOTM0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
