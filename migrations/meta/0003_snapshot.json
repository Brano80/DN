{
  "id": "dcbb17e7-9871-46e7-87dd-c45503f5f7e4",
  "prevId": "cab39f89-fe43-4b9b-95e5-9be41831c1c6",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "key_prefix": {
          "name": "key_prefix",
          "type": "varchar(16)",
          "primaryKey": false,
          "notNull": true
        },
        "hashed_key": {
          "name": "hashed_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_name": {
          "name": "customer_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "api_key_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_keys_key_prefix_unique": {
          "name": "api_keys_key_prefix_unique",
          "nullsNotDistinct": false,
          "columns": [
            "key_prefix"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "action_type": {
          "name": "action_type",
          "type": "audit_action_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "details": {
          "name": "details",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "company_id": {
          "name": "company_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "audit_logs_user_id_users_id_fk": {
          "name": "audit_logs_user_id_users_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "audit_logs_company_id_companies_id_fk": {
          "name": "audit_logs_company_id_companies_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "companies",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.companies": {
      "name": "companies",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ico": {
          "name": "ico",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "dic": {
          "name": "dic",
          "type": "varchar(12)",
          "primaryKey": false,
          "notNull": false
        },
        "ic_dph": {
          "name": "ic_dph",
          "type": "varchar(15)",
          "primaryKey": false,
          "notNull": false
        },
        "nazov": {
          "name": "nazov",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "sidlo_ulica": {
          "name": "sidlo_ulica",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "sidlo_cislo": {
          "name": "sidlo_cislo",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "sidlo_mesto": {
          "name": "sidlo_mesto",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "sidlo_psc": {
          "name": "sidlo_psc",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "registracny_sud": {
          "name": "registracny_sud",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "cislo_vlozky": {
          "name": "cislo_vlozky",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "datum_zapisu": {
          "name": "datum_zapisu",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "pravna_forma": {
          "name": "pravna_forma",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "stat": {
          "name": "stat",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'SK'"
        },
        "stav": {
          "name": "stav",
          "type": "company_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending_verification'"
        },
        "last_verified_at": {
          "name": "last_verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "enforce_two_factor_auth": {
          "name": "enforce_two_factor_auth",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "companies_ico_unique": {
          "name": "companies_ico_unique",
          "nullsNotDistinct": false,
          "columns": [
            "ico"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contracts": {
      "name": "contracts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "owner_email": {
          "name": "owner_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_company_mandates": {
      "name": "user_company_mandates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "company_id": {
          "name": "company_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "rola": {
          "name": "rola",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "rozsah_opravneni": {
          "name": "rozsah_opravneni",
          "type": "mandate_rozsah_opravneni",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "platny_od": {
          "name": "platny_od",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "platny_do": {
          "name": "platny_do",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "zdroj_overenia": {
          "name": "zdroj_overenia",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "default": "'OR SR Mock'"
        },
        "stav": {
          "name": "stav",
          "type": "mandate_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending_confirmation'"
        },
        "is_verified_by_kep": {
          "name": "is_verified_by_kep",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "invitation_context": {
          "name": "invitation_context",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_company_mandates_user_id_users_id_fk": {
          "name": "user_company_mandates_user_id_users_id_fk",
          "tableFrom": "user_company_mandates",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "user_company_mandates_company_id_companies_id_fk": {
          "name": "user_company_mandates_company_id_companies_id_fk",
          "tableFrom": "user_company_mandates",
          "tableTo": "companies",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_two_factor_auth_enabled": {
          "name": "is_two_factor_auth_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "two_factor_auth_secret": {
          "name": "two_factor_auth_secret",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "two_factor_auth_method": {
          "name": "two_factor_auth_method",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.virtual_office_documents": {
      "name": "virtual_office_documents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "virtual_office_id": {
          "name": "virtual_office_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "contract_id": {
          "name": "contract_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by_id": {
          "name": "uploaded_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "uploaded_at": {
          "name": "uploaded_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "virtual_office_documents_virtual_office_id_virtual_offices_id_fk": {
          "name": "virtual_office_documents_virtual_office_id_virtual_offices_id_fk",
          "tableFrom": "virtual_office_documents",
          "tableTo": "virtual_offices",
          "columnsFrom": [
            "virtual_office_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_office_documents_contract_id_contracts_id_fk": {
          "name": "virtual_office_documents_contract_id_contracts_id_fk",
          "tableFrom": "virtual_office_documents",
          "tableTo": "contracts",
          "columnsFrom": [
            "contract_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_office_documents_uploaded_by_id_users_id_fk": {
          "name": "virtual_office_documents_uploaded_by_id_users_id_fk",
          "tableFrom": "virtual_office_documents",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.virtual_office_participants": {
      "name": "virtual_office_participants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "virtual_office_id": {
          "name": "virtual_office_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "user_company_mandate_id": {
          "name": "user_company_mandate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "required_role": {
          "name": "required_role",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "required_company_ico": {
          "name": "required_company_ico",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "participant_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'INVITED'"
        },
        "invitation_context": {
          "name": "invitation_context",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "invited_at": {
          "name": "invited_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "responded_at": {
          "name": "responded_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "virtual_office_participants_virtual_office_id_virtual_offices_id_fk": {
          "name": "virtual_office_participants_virtual_office_id_virtual_offices_id_fk",
          "tableFrom": "virtual_office_participants",
          "tableTo": "virtual_offices",
          "columnsFrom": [
            "virtual_office_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_office_participants_user_id_users_id_fk": {
          "name": "virtual_office_participants_user_id_users_id_fk",
          "tableFrom": "virtual_office_participants",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_office_participants_user_company_mandate_id_user_company_mandates_id_fk": {
          "name": "virtual_office_participants_user_company_mandate_id_user_company_mandates_id_fk",
          "tableFrom": "virtual_office_participants",
          "tableTo": "user_company_mandates",
          "columnsFrom": [
            "user_company_mandate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.virtual_office_signatures": {
      "name": "virtual_office_signatures",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "virtual_office_document_id": {
          "name": "virtual_office_document_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "participant_id": {
          "name": "participant_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "signature_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "signed_at": {
          "name": "signed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "signature_data": {
          "name": "signature_data",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_company_mandate_id": {
          "name": "user_company_mandate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "virtual_office_signatures_virtual_office_document_id_virtual_office_documents_id_fk": {
          "name": "virtual_office_signatures_virtual_office_document_id_virtual_office_documents_id_fk",
          "tableFrom": "virtual_office_signatures",
          "tableTo": "virtual_office_documents",
          "columnsFrom": [
            "virtual_office_document_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_office_signatures_participant_id_virtual_office_participants_id_fk": {
          "name": "virtual_office_signatures_participant_id_virtual_office_participants_id_fk",
          "tableFrom": "virtual_office_signatures",
          "tableTo": "virtual_office_participants",
          "columnsFrom": [
            "participant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_office_signatures_user_company_mandate_id_user_company_mandates_id_fk": {
          "name": "virtual_office_signatures_user_company_mandate_id_user_company_mandates_id_fk",
          "tableFrom": "virtual_office_signatures",
          "tableTo": "user_company_mandates",
          "columnsFrom": [
            "user_company_mandate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.virtual_offices": {
      "name": "virtual_offices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by_id": {
          "name": "created_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "owner_company_id": {
          "name": "owner_company_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "process_type": {
          "name": "process_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "virtual_offices_created_by_id_users_id_fk": {
          "name": "virtual_offices_created_by_id_users_id_fk",
          "tableFrom": "virtual_offices",
          "tableTo": "users",
          "columnsFrom": [
            "created_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "virtual_offices_owner_company_id_companies_id_fk": {
          "name": "virtual_offices_owner_company_id_companies_id_fk",
          "tableFrom": "virtual_offices",
          "tableTo": "companies",
          "columnsFrom": [
            "owner_company_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.api_key_status": {
      "name": "api_key_status",
      "schema": "public",
      "values": [
        "active",
        "inactive"
      ]
    },
    "public.audit_action_type": {
      "name": "audit_action_type",
      "schema": "public",
      "values": [
        "MANDATE_CREATED",
        "MANDATE_ACCEPTED",
        "MANDATE_REJECTED",
        "MANDATE_REVOKED",
        "USER_LOGIN",
        "USER_LOGOUT",
        "COMPANY_CONNECTED",
        "SECURITY_SETTINGS_UPDATED",
        "DOCUMENT_UPLOADED",
        "DOCUMENT_SIGNED",
        "MANDATE_VERIFICATION_ATTEMPT"
      ]
    },
    "public.company_status": {
      "name": "company_status",
      "schema": "public",
      "values": [
        "active",
        "inactive",
        "pending_verification",
        "verification_failed"
      ]
    },
    "public.mandate_rozsah_opravneni": {
      "name": "mandate_rozsah_opravneni",
      "schema": "public",
      "values": [
        "samostatne",
        "spolocne_s_inym",
        "obmedzene"
      ]
    },
    "public.mandate_status": {
      "name": "mandate_status",
      "schema": "public",
      "values": [
        "active",
        "inactive",
        "pending_confirmation",
        "revoked",
        "expired"
      ]
    },
    "public.participant_status": {
      "name": "participant_status",
      "schema": "public",
      "values": [
        "INVITED",
        "ACCEPTED",
        "REJECTED"
      ]
    },
    "public.signature_status": {
      "name": "signature_status",
      "schema": "public",
      "values": [
        "PENDING",
        "SIGNED",
        "REJECTED"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}